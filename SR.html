<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shadow Root - Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø³Ø±ÙŠ</title>
    <style>
        :root {
            --primary: #1a1a2e;
            --secondary: #16213e;
            --accent: #0f3460;
            --system: #e94560;
            --dark: #0d0d1a;
            --light: #f1f1f1;
            --success: #00b894;
            --warning: #fdcb6e;
            --danger: #e74c3c;
            --hacker-green: #00ff41;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --glow: 0 0 10px rgba(0, 255, 65, 0.5);
            
            /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø±ØªØ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
            --rank-d: #95a5a6;
            --rank-c: #3498db;
            --rank-b: #9b59b6;
            --rank-a: #e74c3c;
            --rank-s: #f1c40f;
            --rank-system: #e94560;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }

        body {
            background: linear-gradient(135deg, var(--dark) 0%, #000 100%);
            color: var(--light);
            display: flex;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ù†ÙŠÙˆÙ† */
        .neon-text {
            color: var(--hacker-green);
            text-shadow: 0 0 5px var(--hacker-green), 0 0 10px var(--hacker-green);
        }

        .neon-border {
            border: 1px solid var(--hacker-green);
            box-shadow: 0 0 5px var(--hacker-green), inset 0 0 5px var(--hacker-green);
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ù„ØºØ© */
        .language-switcher {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(26, 26, 46, 0.9);
            border-radius: 5px;
            padding: 8px 12px;
            border: 1px solid rgba(0, 255, 65, 0.3);
        }

        .language-switcher select {
            background: rgba(0, 0, 0, 0.5);
            color: var(--hacker-green);
            border: 1px solid rgba(0, 255, 65, 0.3);
            border-radius: 3px;
            padding: 5px;
            font-size: 14px;
        }

        /* Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¹Ø¯Ù„Ø© */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%230d0d1a"/><path d="M0 0L100 100M100 0L0 100" stroke="%23000" stroke-width="1"/></svg>');
            position: relative;
        }

        .login-container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                0deg,
                rgba(0, 255, 65, 0.05) 0px,
                rgba(0, 255, 65, 0.05) 1px,
                transparent 1px,
                transparent 2px
            );
            pointer-events: none;
        }

        .login-form {
            background: rgba(26, 26, 46, 0.9);
            padding: 40px;
            border-radius: 10px;
            width: 450px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(0, 255, 65, 0.3);
            position: relative;
            z-index: 1;
        }

        .login-form h2 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--hacker-green);
            text-shadow: 0 0 10px var(--hacker-green);
            font-size: 28px;
            letter-spacing: 2px;
        }

        .login-tabs {
            display: flex;
            margin-bottom: 25px;
            border-bottom: 1px solid rgba(0, 255, 65, 0.3);
        }

        .login-tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            color: #aaa;
            font-weight: bold;
        }

        .login-tab.active {
            color: var(--hacker-green);
            border-bottom: 2px solid var(--hacker-green);
            text-shadow: 0 0 5px var(--hacker-green);
        }

        .login-content {
            display: none;
        }

        .login-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--hacker-green);
            font-weight: bold;
        }

        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid rgba(0, 255, 65, 0.3);
            border-radius: 5px;
            background: rgba(0, 0, 0, 0.5);
            color: var(--hacker-green);
            font-size: 16px;
            transition: all 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--hacker-green);
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.5);
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 16px;
        }

        .btn-primary {
            background: var(--hacker-green);
            color: #000;
            width: 100%;
        }

        .btn-primary:hover {
            background: #00cc33;
            box-shadow: 0 0 15px var(--hacker-green);
        }

        .login-hint {
            margin-top: 20px;
            text-align: center;
            font-size: 12px;
            color: #666;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 15px;
        }

        /* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ Ø§Ù„Ù…Ø¹Ø¯Ù„ */
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, var(--primary) 0%, var(--dark) 100%);
            padding: 20px;
            height: 100vh;
            position: fixed;
            overflow-y: auto;
            transition: all 0.3s;
            border-right: 1px solid rgba(0, 255, 65, 0.2);
        }

        .logo {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(0, 255, 65, 0.2);
        }

        .logo h1 {
            color: var(--hacker-green);
            font-size: 26px;
            text-shadow: 0 0 10px var(--hacker-green);
            letter-spacing: 3px;
        }

        .user-info {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            border: 1px solid rgba(0, 255, 65, 0.2);
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 15px;
            font-weight: bold;
            color: white;
            font-size: 18px;
            border: 2px solid;
        }

        /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø±ØªØ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
        .avatar-d { 
            background: linear-gradient(45deg, var(--rank-d), #7f8c8d);
            border-color: var(--rank-d);
        }
        .avatar-c { 
            background: linear-gradient(45deg, var(--rank-c), #2980b9);
            border-color: var(--rank-c);
        }
        .avatar-b { 
            background: linear-gradient(45deg, var(--rank-b), #8e44ad);
            border-color: var(--rank-b);
        }
        .avatar-a { 
            background: linear-gradient(45deg, var(--rank-a), #c0392b);
            border-color: var(--rank-a);
        }
        .avatar-s { 
            background: linear-gradient(45deg, var(--rank-s), #d35400);
            border-color: var(--rank-s);
        }
        .avatar-system { 
            background: linear-gradient(45deg, var(--rank-system), #8e44ad);
            border-color: var(--rank-system);
            box-shadow: 0 0 15px var(--rank-system);
        }

        .ranks-list {
            margin-top: 20px;
        }

        .rank-category {
            margin-bottom: 25px;
        }

        .rank-category h3 {
            color: var(--hacker-green);
            margin-bottom: 12px;
            font-size: 16px;
            text-shadow: 0 0 5px var(--hacker-green);
            padding-bottom: 5px;
            border-bottom: 1px solid rgba(0, 255, 65, 0.2);
        }

        .rank-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid transparent;
        }

        .rank-item:hover {
            background: rgba(0, 255, 65, 0.1);
            border-color: rgba(0, 255, 65, 0.3);
            transform: translateX(-5px);
        }

        .rank-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 10px;
        }

        /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø±ØªØ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
        .rank-d { background-color: var(--rank-d); box-shadow: 0 0 5px var(--rank-d); }
        .rank-c { background-color: var(--rank-c); box-shadow: 0 0 5px var(--rank-c); }
        .rank-b { background-color: var(--rank-b); box-shadow: 0 0 5px var(--rank-b); }
        .rank-a { background-color: var(--rank-a); box-shadow: 0 0 5px var(--rank-a); }
        .rank-s { background-color: var(--rank-s); box-shadow: 0 0 5px var(--rank-s); }
        .rank-system { 
            background-color: var(--rank-system); 
            box-shadow: 0 0 10px var(--rank-system);
            animation: pulse-gold 2s infinite;
        }

        @keyframes pulse-gold {
            0% { box-shadow: 0 0 5px var(--rank-system); }
            50% { box-shadow: 0 0 15px var(--rank-system), 0 0 20px gold; }
            100% { box-shadow: 0 0 5px var(--rank-system); }
        }

        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø§Ù„Ù…Ø¹Ø¯Ù„ */
        .main-content {
            flex: 1;
            margin-right: 280px;
            padding: 25px;
            transition: all 0.3s;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%230d0d1a"/><path d="M0 0L100 100M100 0L0 100" stroke="%23000" stroke-width="1"/></svg>');
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(0, 255, 65, 0.2);
        }

        .header h2 {
            color: var(--hacker-green);
            text-shadow: 0 0 10px var(--hacker-green);
            font-size: 24px;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .broadcast-btn {
            background: var(--system);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .broadcast-btn:hover {
            background: #d63031;
            box-shadow: 0 0 10px var(--system);
        }

        .secret-btn {
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            font-size: 20px;
            box-shadow: var(--shadow);
            transition: all 0.3s;
        }

        .secret-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px var(--accent);
        }

        .btn-logout {
            background: transparent;
            border: 1px solid var(--danger);
            color: var(--danger);
            padding: 10px 20px;
        }

        .btn-logout:hover {
            background: var(--danger);
            color: white;
            box-shadow: 0 0 10px var(--danger);
        }

        /* unread badges */
        .unread-badge {
            display: inline-block;
            background: var(--system);
            color: #000;
            padding: 2px 6px;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 8px;
            vertical-align: middle;
        }

        .tab-unread {
            display: inline-block;
            min-width: 18px;
            text-align: center;
            background: var(--accent);
            color: #fff;
            padding: 2px 6px;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 6px;
        }

        /* Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ù…Ø¹Ø¯Ù„Ø© */
        .tabs {
            display: flex;
            margin-bottom: 25px;
            border-bottom: 1px solid rgba(0, 255, 65, 0.2);
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 25px;
            cursor: pointer;
            transition: all 0.3s;
            color: #aaa;
            font-weight: bold;
            position: relative;
        }

        .tab.active {
            color: var(--hacker-green);
            text-shadow: 0 0 5px var(--hacker-green);
        }

        .tab.active::after {
            content: "";
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--hacker-green);
            box-shadow: 0 0 10px var(--hacker-green);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Ù†Ù…Ø· Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù…Ø¹Ø¯Ù„ */
        .chat-container {
            background: rgba(26, 26, 46, 0.7);
            border-radius: 10px;
            padding: 20px;
            height: 500px;
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(0, 255, 65, 0.2);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 15px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            border: 1px solid rgba(0, 255, 65, 0.1);
        }

        .message {
            margin-bottom: 15px;
            padding: 12px 15px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            position: relative;
            border-left: 4px solid var(--secondary);
            transition: all 0.3s;
        }

        .message:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        /* ØªØ®ØµÙŠØµ ØªØµÙ…ÙŠÙ… Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø­Ø³Ø¨ Ø§Ù„Ø±ØªØ¨Ø© */
        .message.d {
            border-left-color: var(--rank-d);
            background: linear-gradient(45deg, rgba(149, 165, 166, 0.1), rgba(0, 0, 0, 0.3));
        }

        .message.c {
            border-left-color: var(--rank-c);
            background: linear-gradient(45deg, rgba(52, 152, 219, 0.1), rgba(0, 0, 0, 0.3));
        }

        .message.b {
            border-left-color: var(--rank-b);
            background: linear-gradient(45deg, rgba(155, 89, 182, 0.1), rgba(0, 0, 0, 0.3));
        }

        .message.a {
            border-left-color: var(--rank-a);
            background: linear-gradient(45deg, rgba(231, 76, 60, 0.1), rgba(0, 0, 0, 0.3));
            border: 1px solid rgba(231, 76, 60, 0.3);
        }

        .message.s {
            border-left-color: var(--rank-s);
            background: linear-gradient(45deg, rgba(241, 196, 15, 0.1), rgba(0, 0, 0, 0.3));
            border: 1px solid rgba(241, 196, 15, 0.3);
            box-shadow: 0 0 10px rgba(241, 196, 15, 0.2);
        }

        .message.system {
            border-left-color: var(--rank-system);
            background: linear-gradient(45deg, rgba(233, 69, 96, 0.2), rgba(0, 0, 0, 0.4));
            border: 1px solid rgba(233, 69, 96, 0.5);
            box-shadow: 0 0 15px rgba(233, 69, 96, 0.3);
            animation: pulse-system 3s infinite;
        }

        @keyframes pulse-system {
            0% { box-shadow: 0 0 10px rgba(233, 69, 96, 0.3); }
            50% { box-shadow: 0 0 20px rgba(233, 69, 96, 0.5), 0 0 30px gold; }
            100% { box-shadow: 0 0 10px rgba(233, 69, 96, 0.3); }
        }

        .message.banned {
            opacity: 0.6;
            border-left-color: var(--danger);
            background: linear-gradient(45deg, rgba(231, 76, 60, 0.1), rgba(0, 0, 0, 0.3));
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            margin-bottom: 8px;
            color: #aaa;
        }

        .message-sender {
            font-weight: bold;
        }

        /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…Ø±Ø³Ù„ÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ø±ØªØ¨Ø© */
        .sender-d { 
            color: var(--rank-d); 
        }
        .sender-c { 
            color: var(--rank-c); 
        }
        .sender-b { 
            color: var(--rank-b); 
        }
        .sender-a { 
            color: var(--rank-a); 
            text-shadow: 0 0 5px var(--rank-a);
        }
        .sender-s { 
            color: var(--rank-s); 
            text-shadow: 0 0 5px var(--rank-s);
        }
        .sender-system { 
            color: var(--rank-system); 
            text-shadow: 0 0 10px var(--rank-system), 0 0 15px gold;
            animation: text-glow 2s infinite;
        }

        @keyframes text-glow {
            0% { text-shadow: 0 0 5px var(--rank-system); }
            50% { text-shadow: 0 0 15px var(--rank-system), 0 0 20px gold; }
            100% { text-shadow: 0 0 5px var(--rank-system); }
        }

        .message-actions {
            position: absolute;
            top: 8px;
            left: 8px;
            display: none;
            gap: 5px;
        }

        .message:hover .message-actions {
            display: flex;
        }

        .delete-btn, .ban-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 3px;
            transition: all 0.3s;
        }

        .delete-btn {
            color: var(--danger);
            background: rgba(231, 76, 60, 0.2);
        }

        .delete-btn:hover {
            background: rgba(231, 76, 60, 0.4);
        }

        .ban-btn {
            color: var(--warning);
            background: rgba(243, 156, 18, 0.2);
        }

        .ban-btn:hover {
            background: rgba(243, 156, 18, 0.4);
        }

        .chat-input {
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid rgba(0, 255, 65, 0.3);
            border-radius: 5px;
            background: rgba(0, 0, 0, 0.5);
            color: var(--hacker-green);
            font-size: 16px;
            transition: all 0.3s;
        }

        .chat-input input:focus {
            outline: none;
            border-color: var(--hacker-green);
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.5);
        }

        .chat-input button {
            padding: 12px 20px;
            background: var(--hacker-green);
            border: none;
            border-radius: 5px;
            color: #000;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .chat-input button:hover {
            background: #00cc33;
            box-shadow: 0 0 15px var(--hacker-green);
        }

        /* Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù…Ø¸Ù„Ù…Ø© Ø§Ù„Ù…Ø¹Ø¯Ù„Ø© */
        .dark-chat-options {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .option-card {
            background: rgba(26, 26, 46, 0.7);
            padding: 25px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid rgba(0, 255, 65, 0.2);
        }

        .option-card:hover {
            background: rgba(0, 255, 65, 0.1);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .option-card h3 {
            margin-bottom: 10px;
            color: var(--hacker-green);
            text-shadow: 0 0 5px var(--hacker-green);
        }

        .option-card p {
            color: #aaa;
            font-size: 14px;
        }

        .dark-chat-room {
            display: none;
            margin-top: 20px;
        }

        .room-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            border: 1px solid rgba(0, 255, 65, 0.2);
        }

        .room-header h3 {
            color: var(--hacker-green);
            text-shadow: 0 0 5px var(--hacker-green);
        }

        /* Ù†Ù…Ø· Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¹Ø¯Ù„ */
        .admin-panel {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }

        .admin-card {
            background: rgba(26, 26, 46, 0.7);
            padding: 25px;
            border-radius: 10px;
            border: 1px solid rgba(0, 255, 65, 0.2);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .admin-card h3 {
            margin-bottom: 20px;
            color: var(--hacker-green);
            text-shadow: 0 0 5px var(--hacker-green);
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0, 255, 65, 0.2);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--hacker-green);
            font-weight: bold;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid rgba(0, 255, 65, 0.3);
            border-radius: 5px;
            background: rgba(0, 0, 0, 0.5);
            color: var(--hacker-green);
            font-size: 16px;
            transition: all 0.3s;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--hacker-green);
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.5);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
            box-shadow: 0 0 10px var(--danger);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #00a085;
            box-shadow: 0 0 10px var(--success);
        }

        .btn-warning {
            background: var(--warning);
            color: #000;
        }

        .btn-warning:hover {
            background: #f1c40f;
            box-shadow: 0 0 10px var(--warning);
        }

        .btn-system {
            background: var(--system);
            color: white;
        }

        .btn-system:hover {
            background: #d63031;
            box-shadow: 0 0 10px var(--system);
        }

        /* Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ© */
        .secret-features {
            display: none;
            margin-top: 30px;
        }

        /* Ù†Ù…Ø· Ø§Ù„Ù…Ø±Ø§Ø³Ù„Ø© Ø§Ù„Ø®Ø§ØµØ© */
        .private-message-container {
            display: flex;
            height: 500px;
            gap: 20px;
        }

        .private-users-list {
            width: 250px;
            background: rgba(26, 26, 46, 0.7);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid rgba(0, 255, 65, 0.2);
            overflow-y: auto;
        }

        .private-user-item {
            padding: 12px;
            margin-bottom: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid transparent;
        }

        .private-user-item:hover {
            background: rgba(0, 255, 65, 0.1);
            border-color: rgba(0, 255, 65, 0.3);
        }

        .private-user-item.active {
            background: rgba(0, 255, 65, 0.2);
            border-color: var(--hacker-green);
        }

        .private-chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… */
        .system-glitch {
            animation: glitch 1s infinite;
        }

        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }

        .special-features {
            background: linear-gradient(45deg, rgba(233, 69, 96, 0.2), rgba(0, 255, 65, 0.2));
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Ø§Ù„ØªÙƒÙŠÙ Ù…Ø¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
            }
            
            .main-content {
                margin-right: 0;
            }
            
            body {
                flex-direction: column;
            }
            
            .private-message-container {
                flex-direction: column;
            }
            
            .private-users-list {
                width: 100%;
                height: 200px;
            }
            
            .language-switcher {
                top: 10px;
                left: 10px;
            }
        }

        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© */
        .hacker-terminal {
            font-family: 'Courier New', monospace;
            background: #000;
            color: var(--hacker-green);
            padding: 15px;
            border-radius: 5px;
            border: 1px solid var(--hacker-green);
            box-shadow: 0 0 10px var(--hacker-green);
            overflow-y: auto;
            max-height: 200px;
        }

        .terminal-line {
            margin-bottom: 5px;
        }

        .terminal-prompt {
            color: var(--hacker-green);
        }

        .typewriter {
            overflow: hidden;
            border-right: 2px solid var(--hacker-green);
            white-space: nowrap;
            margin: 0 auto;
            animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
        }

        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: var(--hacker-green) }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 255, 65, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(0, 255, 65, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 255, 65, 0); }
        }

        /* Ù†Ù…Ø· Ø§Ù„Ø¯Ø±Ø¯Ø´Ø§Øª Ø§Ù„Ù…Ø¸Ù„Ù…Ø© */
        .dark-chats-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .modal-close {
            background: var(--danger);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
        }

        .room-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid var(--secondary);
        }

        .room-header-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .room-messages {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 5px;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 10px;
        }

        .room-message {
            padding: 5px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 12px;
        }

        /* Ø¥Ø®ÙØ§Ø¡ ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¹Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø¹Ø§Ø¯ÙŠÙŠÙ† */
        .admin-tab {
            display: none !important;
        }

        .admin-tab.visible {
            display: block !important;
        }

        /* ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø±Ø§Ø³Ù„Ø© Ø§Ù„Ø®Ø§ØµØ© */
        .private-tab {
            display: none !important;
        }

        .private-tab.visible {
            display: block !important;
        }

        /* Ø£Ù†Ù…Ø§Ø· Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙˆØ«ÙŠÙ‚ ÙˆØ§Ù„Ù†Ù‚Ø§Ø· */
        
        /* ØªØ¨ÙˆÙŠØ¨ Ø§Ù„ØªÙˆØ«ÙŠÙ‚ */
        .verification-tab {
            display: none !important;
        }
        
        .verification-tab.visible {
            display: block !important;
        }
        
        /* ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù†Ù‚Ø§Ø· */
        .points-tab {
            display: none !important;
        }
        
        .points-tab.visible {
            display: block !important;
        }
        
        /* ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø£Ø±Ø´ÙŠÙ */
        .archive-tab {
            display: none !important;
        }
        
        .archive-tab.visible {
            display: block !important;
        }
        
        /* Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„ØªÙˆØ«ÙŠÙ‚ */
        .verification-form {
            background: rgba(26, 26, 46, 0.7);
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid rgba(0, 255, 65, 0.2);
        }
        
        .project-card {
            background: rgba(26, 26, 46, 0.7);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border: 1px solid rgba(0, 255, 65, 0.2);
            position: relative;
        }
        
        .project-card.verified {
            border-color: var(--success);
            box-shadow: 0 0 10px rgba(0, 184, 148, 0.3);
        }
        
        .verified-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: var(--success);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .project-images {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            overflow-x: auto;
        }
        
        .project-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 5px;
            border: 1px solid rgba(0, 255, 65, 0.3);
        }
        
        /* Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø· */
        .points-display {
            background: rgba(26, 26, 46, 0.7);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid rgba(0, 255, 65, 0.2);
            text-align: center;
        }
        
        .points-value {
            font-size: 32px;
            font-weight: bold;
            color: var(--hacker-green);
            text-shadow: 0 0 10px var(--hacker-green);
        }
        
        .points-level {
            margin-top: 10px;
            font-size: 14px;
            color: #aaa;
        }
        
        .points-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin: 5px;
        }
        
        .badge-1 { background: linear-gradient(45deg, #95a5a6, #7f8c8d); }
        .badge-2 { background: linear-gradient(45deg, #3498db, #2980b9); }
        .badge-3 { background: linear-gradient(45deg, #9b59b6, #8e44ad); }
        .badge-4 { background: linear-gradient(45deg, #e74c3c, #c0392b); }
        .badge-5 { background: linear-gradient(45deg, #f1c40f, #d35400); }
        .badge-6 { background: linear-gradient(45deg, #e94560, #8e44ad); box-shadow: 0 0 10px var(--rank-system); }
        
        .leaderboard {
            margin-top: 20px;
        }
        
        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            padding: 12px;
            margin-bottom: 8px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            border: 1px solid rgba(0, 255, 65, 0.1);
        }
        
        .leaderboard-rank {
            font-weight: bold;
            color: var(--hacker-green);
        }
        
        /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…ÙŠØ²Ø§Øª */
        .features-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .feature-item {
            background: rgba(26, 26, 46, 0.7);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(0, 255, 65, 0.2);
            text-align: center;
        }
        
        .feature-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        /* ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙˆØ§ÙÙ‚ */
        @media (max-width: 768px) {
            .features-list {
                grid-template-columns: 1fr;
            }
            
            .project-images {
                flex-wrap: wrap;
            }
            
            .project-image {
                width: 80px;
                height: 80px;
            }
        }
        
        /* ØªØ­Ø³ÙŠÙ† Ø´Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© */
        .user-badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 10px;
            margin-right: 5px;
            font-weight: bold;
        }

        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¨Ø« Ø§Ù„Ø¹Ø§Ù… Ø§Ù„Ù…Ù…ÙŠØ² */
        .broadcast-message {
            background: linear-gradient(45deg, rgba(233, 69, 96, 0.3), rgba(0, 255, 65, 0.2)) !important;
            border: 2px solid var(--system) !important;
            box-shadow: 0 0 20px rgba(233, 69, 96, 0.5) !important;
            animation: broadcast-pulse 2s infinite !important;
        }

        @keyframes broadcast-pulse {
            0% { box-shadow: 0 0 10px rgba(233, 69, 96, 0.5); }
            50% { box-shadow: 0 0 25px rgba(233, 69, 96, 0.8), 0 0 35px gold; }
            100% { box-shadow: 0 0 10px rgba(233, 69, 96, 0.5); }
        }

        .broadcast-header {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
            color: var(--system);
            text-shadow: 0 0 10px var(--system);
        }

        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£Ø±Ø´ÙŠÙ */
        .archive-container {
            background: rgba(26, 26, 46, 0.7);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid rgba(0, 255, 65, 0.2);
        }

        .archive-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .archive-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid var(--secondary);
        }

        .archive-item-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        /* Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© */
        .system-features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .system-feature-card {
            background: rgba(26, 26, 46, 0.7);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(0, 255, 65, 0.2);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .system-feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            border-color: var(--system);
        }

        .system-feature-icon {
            font-size: 32px;
            margin-bottom: 15px;
            color: var(--system);
        }

        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ù†Ù‚Ø§Ø· ÙÙŠ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© */
        .message-with-points {
            position: relative;
        }

        .points-indicator {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--success);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
        }

        /* ØªØµÙ…ÙŠÙ… Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… */
        .verification-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid rgba(0, 255, 65, 0.2);
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--hacker-green);
        }

        .stat-label {
            font-size: 12px;
            color: #aaa;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <!-- Ø´Ø±ÙŠØ· ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ© -->
    <div class="language-switcher">
        <select id="languageSelect">
            <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
            <option value="en">English</option>
            <option value="fr">FranÃ§ais</option>
            <option value="es">EspaÃ±ol</option>
            <option value="de">Deutsch</option>
        </select>
    </div>

    <!-- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="loginScreen" class="login-container">
        <div class="login-form">
            <h2 class="typewriter" data-i18n="app_title">Shadow Root</h2>
            
            <div class="login-tabs">
                <div class="login-tab active" data-tab="login" data-i18n="login_tab">Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù†Ø¸Ø§Ù…</div>
                <div class="login-tab" data-tab="register" data-i18n="register_tab">Ø§Ù†Ø¶Ù…Ø§Ù… Ø¬Ø¯ÙŠØ¯</div>
            </div>
            
            <!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
            <div class="login-content active" id="loginContent">
                <div class="form-group">
                    <label for="loginUsername" data-i18n="username_label">Ø§Ù„Ù…Ø¹Ø±Ù Ø§Ù„Ø³Ø±ÙŠ</label>
                    <input type="text" id="loginUsername" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¹Ø±Ù Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ" data-i18n-placeholder="username_placeholder">
                </div>
                <div class="form-group">
                    <label for="loginPassword" data-i18n="password_label">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                    <input type="password" id="loginPassword" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø³Ø±ÙŠØ©" data-i18n-placeholder="password_placeholder">
                </div>
                <button id="loginBtn" class="btn btn-primary" data-i18n="login_button">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
                <div class="login-hint" data-i18n="login_hint">
                    Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ø­Ù…ÙŠ Ø¨ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„ØªØ´ÙÙŠØ± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
                </div>
            </div>
            
            <!-- Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ -->
            <div class="login-content" id="registerContent">
                <div class="form-group">
                    <label for="registerUsername" data-i18n="choose_username">Ø§Ø®ØªØ± Ù…Ø¹Ø±ÙÙ‹Ø§ Ø³Ø±ÙŠÙ‹Ø§</label>
                    <input type="text" id="registerUsername" placeholder="Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù…: 00-09" data-i18n-placeholder="username_hint">
                    <div style="font-size: 11px; color: #666; margin-top: 5px;" data-i18n="username_reserved">
                        Ø§Ù„Ù…Ø¹Ø±ÙØ§Øª 00-09 Ù…Ø­Ø¬ÙˆØ²Ø© Ù„Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„Ù‚ÙŠØ§Ø¯Ø©
                    </div>
                </div>
                <div class="form-group">
                    <label for="registerPassword" data-i18n="choose_password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø³Ø±ÙŠØ©</label>
                    <input type="password" id="registerPassword" placeholder="Ø§Ø®ØªØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ©" data-i18n-placeholder="password_hint">
                </div>
                <div class="form-group">
                    <label for="registerConfirmPassword" data-i18n="confirm_password">ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                    <input type="password" id="registerConfirmPassword" placeholder="Ø£Ø¹Ø¯ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" data-i18n-placeholder="confirm_password_placeholder">
                </div>
                <button id="registerBtn" class="btn btn-success" data-i18n="register_button">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</button>
            </div>
        </div>
    </div>

    <!-- Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <div id="mainApp" style="display: none; width: 100%;">
        <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ -->
        <div class="sidebar">
            <div class="logo">
                <h1 data-i18n="app_title">Shadow Root</h1>
                <div style="font-size: 12px; color: #666; margin-top: 5px;" data-i18n="app_subtitle">Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø³Ø±ÙŠ</div>
            </div>
            
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">SR</div>
                <div>
                    <div id="userName" class="neon-text">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</div>
                    <div id="userRank" style="font-size: 12px; color: #aaa;">Ø§Ù„Ø±ØªØ¨Ø©</div>
                    <div id="userPoints" style="font-size: 10px; color: var(--hacker-green);">Ø§Ù„Ù†Ù‚Ø§Ø·: 0</div>
                    <div id="userStatus" style="font-size: 10px; color: #aaa;"></div>
                </div>
            </div>
            
            <div class="ranks-list">
                <div class="rank-category">
                    <h3 data-i18n="leadership_ranks">Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ù„ÙŠØ§</h3>
                    <div class="rank-item">
                        <div class="rank-color rank-system"></div>
                        <div data-i18n="rank_system">SYSTEM</div>
                    </div>
                    <div class="rank-item">
                        <div class="rank-color rank-s"></div>
                        <div data-i18n="rank_s">S</div>
                    </div>
                </div>
                
                <div class="rank-category">
                    <h3 data-i18n="programmer_ranks">ÙØ±ÙŠÙ‚ Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ÙŠÙ†</h3>
                    <div class="rank-item">
                        <div class="rank-color rank-a"></div>
                        <div data-i18n="rank_a">A</div>
                    </div>
                    <div class="rank-item">
                        <div class="rank-color rank-b"></div>
                        <div data-i18n="rank_b">B</div>
                    </div>
                    <div class="rank-item">
                        <div class="rank-color rank-c"></div>
                        <div data-i18n="rank_c">C</div>
                    </div>
                    <div class="rank-item">
                        <div class="rank-color rank-d"></div>
                        <div data-i18n="rank_d">D</div>
                    </div>
                </div>
            </div>

            <!-- Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ© - ØªØ¸Ù‡Ø± Ù„Ù„Ù…Ø¯ÙŠØ± ÙˆØ§Ù„Ù†Ø¸Ø§Ù… ÙÙ‚Ø· -->
            <div class="secret-features" id="secretFeatures">
                <div class="rank-category">
                    <h3 data-i18n="your_features">Ù…ÙŠØ²Ø§Øª Ø±ØªØ¨ØªÙƒ</h3>
                    <div class="rank-item" onclick="showAdminTools()" id="adminToolsItem">
                        <div data-i18n="admin_tools">ğŸ› ï¸ Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­ÙƒÙ…</div>
                    </div>
                    <div class="rank-item" onclick="viewAllDarkChats()" id="darkChatsItem">
                        <div data-i18n="view_dark_chats">ğŸ” Ø§Ù„Ø¯Ø±Ø¯Ø´Ø§Øª Ø§Ù„Ù…Ø¸Ù„Ù…Ø©</div>
                    </div>
                    <div class="rank-item" onclick="systemBroadcast()" id="broadcastItem">
                        <div data-i18n="system_broadcast">ğŸ“¢ Ø§Ù„Ø¨Ø« Ø§Ù„Ø¹Ø§Ù…</div>
                    </div>
                    <div class="rank-item" onclick="showSystemTools()" id="systemToolsItem">
                        <div data-i18n="system_tools">âš¡ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</div>
                    </div>
                    <div class="rank-item" onclick="showVerificationTab()" id="verificationItem">
                        <div data-i18n="project_verification">âœ… ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</div>
                    </div>
                    <div class="rank-item" onclick="showPointsTab()" id="pointsItem">
                        <div data-i18n="points_system">ğŸ† Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø·</div>
                    </div>
                    <div class="rank-item" onclick="showArchiveTab()" id="archiveItem">
                        <div data-i18n="system_archive">ğŸ“š Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ù†Ø¸Ø§Ù…</div>
                    </div>
                    <div class="rank-item" onclick="showEarthFeatures()" id="earthFeaturesItem">
                        <div data-i18n="earth_features">ğŸŒ Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø£Ø±Ø¶</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
        <div class="main-content">
            <div class="header">
                <h2 data-i18n="team_title">ÙØ±ÙŠÙ‚ Shadow Root</h2>
                <div class="header-controls">
                    <!-- Ø²Ø± Ø§Ù„Ø¨Ø« Ø§Ù„Ø¹Ø§Ù… ÙŠØ¸Ù‡Ø± Ù„Ù„Ù†Ø¸Ø§Ù… ÙÙ‚Ø· -->
                    <button id="broadcastBtn" class="broadcast-btn" style="display: none;" data-i18n="broadcast_button">ğŸ“¢ Ø¨Ø« Ø¹Ø§Ù…</button>
                    <!-- Ø²Ø± Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ© ÙŠØ¸Ù‡Ø± Ù„Ù„Ù…Ø¯ÙŠØ± ÙˆØ§Ù„Ù†Ø¸Ø§Ù… ÙÙ‚Ø· -->
                    <button id="secretBtn" class="secret-btn" title="Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ©" style="display: none;">âš¡</button>
                    <button id="exportBackupBtn" class="btn btn-primary" title="ØªØµØ¯ÙŠØ± Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©">ØªØµØ¯ÙŠØ± Ù†Ø³Ø®Ø©</button>
                    <input type="file" id="importBackupInput" style="display:none;" accept="application/json">
                    <button id="importBackupBtn" class="btn btn-warning">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ø³Ø®Ø©</button>
                    <button id="logoutBtn" class="btn btn-logout" data-i18n="logout_button">Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©</button>
                </div>
            </div>
            
            <div class="tabs">
                <div class="tab active" data-tab="chat" data-i18n="public_chat">Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¹Ø§Ù…Ø©</div>
                <div class="tab" data-tab="darkChat" data-i18n="dark_chat">Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù…Ø¸Ù„Ù…Ø©</div>
                <div class="tab" data-tab="members" data-i18n="members_tab">Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡</div>
                <div class="tab private-tab" data-tab="private" data-i18n="private_messages">Ø§Ù„Ù…Ø±Ø§Ø³Ù„Ø© Ø§Ù„Ø®Ø§ØµØ©</div>
                <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø¬Ø¯ÙŠØ¯ -->
                <div class="tab verification-tab" data-tab="verification" data-i18n="project_verification">ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</div>
                <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø¬Ø¯ÙŠØ¯ -->
                <div class="tab points-tab" data-tab="points" data-i18n="points_system">Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø·</div>
                <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ø¬Ø¯ÙŠØ¯ -->
                <div class="tab archive-tab" data-tab="archive" data-i18n="system_archive">Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ù†Ø¸Ø§Ù…</div>
                <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙŠØ¸Ù‡Ø± Ù„Ù„Ù…Ø¯ÙŠØ± ÙˆØ§Ù„Ù†Ø¸Ø§Ù… ÙÙ‚Ø· -->
                <div class="tab admin-tab" data-tab="admin" id="adminTabBtn" data-i18n="admin_panel">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</div>
            </div>
            
            <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¹Ø§Ù…Ø© -->
            <div class="tab-content active" id="chatTab">
                <div class="chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <!-- Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                    </div>
                    <div class="chat-input">
                        <input type="text" id="messageInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." data-i18n-placeholder="message_placeholder">
                        <button id="sendMessageBtn" data-i18n="send_button">Ø¥Ø±Ø³Ø§Ù„</button>
                    </div>
                </div>
            </div>
            
            <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù…Ø¸Ù„Ù…Ø© -->
            <div class="tab-content" id="darkChatTab">
                <div class="dark-chat-options">
                    <div class="option-card" id="createRoomBtn">
                        <h3 data-i18n="create_room">Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯Ø©</h3>
                        <p data-i18n="create_room_desc">Ø£Ù†Ø´Ø¦ ØºØ±ÙØ© Ø¯Ø±Ø¯Ø´Ø© Ù…Ø¤Ù‚ØªØ© Ø¨Ø±Ù…Ø² Ø³Ø±ÙŠ</p>
                    </div>
                    <div class="option-card" id="joinRoomBtn">
                        <h3 data-i18n="join_room">Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ ØºØ±ÙØ©</h3>
                        <p data-i18n="join_room_desc">Ø§Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„ØºØ±ÙØ© Ù„Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ Ø¯Ø±Ø¯Ø´Ø© Ù…Ø¤Ù‚ØªØ©</p>
                    </div>
                </div>
                
                <div id="darkChatRoom" class="dark-chat-room">
                    <div class="chat-container">
                        <div class="room-header">
                            <h3 data-i18n="dark_chat_room">Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù…Ø¸Ù„Ù…Ø© - Ø§Ù„ØºØ±ÙØ©: <span id="roomCodeDisplay"></span></h3>
                            <button id="leaveRoomBtn" class="btn btn-danger" data-i18n="leave_room">Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„ØºØ±ÙØ©</button>
                        </div>
                        <div class="chat-messages" id="darkChatMessages">
                            <!-- Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù…Ø¸Ù„Ù…Ø© ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                        </div>
                        <div class="chat-input">
                            <input type="text" id="darkMessageInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." data-i18n-placeholder="message_placeholder">
                            <button id="sendDarkMessageBtn" data-i18n="send_button">Ø¥Ø±Ø³Ø§Ù„</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ -->
            <div class="tab-content" id="membersTab">
                <div class="admin-panel" id="membersList">
                    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                </div>
            </div>

            <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø±Ø§Ø³Ù„Ø© Ø§Ù„Ø®Ø§ØµØ© -->
            <div class="tab-content" id="privateTab">
                <div class="private-message-container">
                    <div class="private-users-list" id="privateUsersList">
                        <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù„Ù„Ù…Ø±Ø§Ø³Ù„Ø© Ø§Ù„Ø®Ø§ØµØ© -->
                    </div>
                    <div class="private-chat-area">
                        <div class="chat-container">
                            <div class="chat-messages" id="privateMessages">
                                <!-- Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø±Ø§Ø³Ù„Ø© Ø§Ù„Ø®Ø§ØµØ© ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                            </div>
                            <div class="chat-input">
                                <input type="text" id="privateMessageInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©..." data-i18n-placeholder="private_message_placeholder">
                                <button id="sendPrivateMessageBtn" data-i18n="send_button">Ø¥Ø±Ø³Ø§Ù„</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø¬Ø¯ÙŠØ¯ -->
            <div class="tab-content" id="verificationTab">
                <div class="admin-panel">
                    <div class="admin-card">
                        <h3 data-i18n="verify_project">ØªÙˆØ«ÙŠÙ‚ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯</h3>
                        <div class="form-group">
                            <label for="projectName" data-i18n="project_name">Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label>
                            <input type="text" id="projectName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹" data-i18n-placeholder="project_name_placeholder">
                        </div>
                        <div class="form-group">
                            <label for="projectDescription" data-i18n="project_description">ÙˆØµÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label>
                            <textarea id="projectDescription" rows="4" placeholder="Ø£Ø¯Ø®Ù„ ÙˆØµÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹" data-i18n-placeholder="project_description_placeholder" style="width: 100%; padding: 12px 15px; border: 1px solid rgba(0, 255, 65, 0.3); border-radius: 5px; background: rgba(0, 0, 0, 0.5); color: var(--hacker-green); font-size: 16px;"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="projectImages" data-i18n="project_images">ØµÙˆØ± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label>
                            <input type="file" id="projectImages" multiple accept="image/*">
                            <div style="font-size: 12px; color: #666; margin-top: 5px;" data-i18n="project_images_hint">ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ Ø¹Ø¯Ø© ØµÙˆØ± Ù„Ù„Ù…Ø´Ø±ÙˆØ¹</div>
                        </div>
                        <button id="submitProjectBtn" class="btn btn-primary" data-i18n="submit_project">ØªÙ‚Ø¯ÙŠÙ… Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</button>
                    </div>
                    
                    <div class="admin-card">
                        <h3 data-i18n="my_projects">Ù…Ø´Ø§Ø±ÙŠØ¹ÙŠ</h3>
                        <div id="userProjectsList">
                            <!-- Ù‚Ø§Ø¦Ù…Ø© Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                        </div>
                    </div>
                    <div class="admin-card">
                        <h3>Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…ÙˆØ«Ù‚Ø© Ø¹Ø§Ù…Ø©</h3>
                        <div id="verifiedProjectsList">
                            <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…ÙˆØ«Ù‚Ø© ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                        </div>
                    </div>
                    
                    <!-- Ù„ÙˆØ­Ø© Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ (Ù„Ù„Ø³Ø³ØªÙ… ÙˆØ§Ù„Ù…Ø¯ÙŠØ±ÙŠÙ† ÙÙ‚Ø·) -->
                    <div class="admin-card" id="reviewProjectsCard" style="display: none;">
                        <h3 data-i18n="review_projects">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</h3>
                        <div id="pendingProjectsList">
                            <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„Ù‚Ø© ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø¬Ø¯ÙŠØ¯ -->
            <div class="tab-content" id="pointsTab">
                <div class="points-display">
                    <div data-i18n="your_points">Ù†Ù‚Ø§Ø·Ùƒ</div>
                    <div class="points-value" id="userPointsValue">0</div>
                    <div class="points-level" id="userLevel">Ø§Ù„Ù…Ø³ØªÙˆÙ‰: Ù…Ø¨ØªØ¯Ø¦</div>
                    <div id="userBadges">
                        <!-- Ø´Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                    </div>
                </div>
                
                <div class="admin-panel">
                    <div class="admin-card">
                        <h3 data-i18n="points_leaderboard">ØªØµÙ†ÙŠÙ Ø§Ù„Ù†Ù‚Ø§Ø·</h3>
                        <div class="leaderboard" id="pointsLeaderboard">
                            <!-- ØªØµÙ†ÙŠÙ Ø§Ù„Ù†Ù‚Ø§Ø· ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                        </div>
                    </div>
                    
                    <div class="admin-card">
                        <h3 data-i18n="how_to_earn">ÙƒÙŠÙÙŠØ© ÙƒØ³Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·</h3>
                        <div class="features-list">
                            <div class="feature-item">
                                <div class="feature-icon">ğŸ’¬</div>
                                <div data-i18n="daily_login">Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…ÙŠ</div>
                                <div style="color: var(--hacker-green);">+3 Ù†Ù‚Ø§Ø·</div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">ğŸš€</div>
                                <div data-i18n="verified_project">Ù…Ø´Ø±ÙˆØ¹ Ù…ÙˆØ«Ù‚</div>
                                <div style="color: var(--hacker-green);">+15 Ù†Ù‚Ø·Ø©</div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">ğŸ’¡</div>
                                <div data-i18n="active_participation">Ù…Ø´Ø§Ø±ÙƒØ© ÙØ¹Ø§Ù„Ø©</div>
                                <div style="color: var(--hacker-green);">+5 Ù†Ù‚Ø§Ø·</div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">ğŸ†</div>
                                <div data-i18n="special_achievements">Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø®Ø§ØµØ©</div>
                                <div style="color: var(--hacker-green);">+10 Ù†Ù‚Ø§Ø·</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ù‚Ø§Ø· (Ù„Ù„Ø³Ø³ØªÙ… ÙÙ‚Ø·) -->
                    <div class="admin-card" id="managePointsCard" style="display: none;">
                        <h3 data-i18n="manage_points">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ù‚Ø§Ø·</h3>
                        <div class="form-group">
                            <label for="pointsUserSelect" data-i18n="select_user">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                            <select id="pointsUserSelect">
                                <option value="" data-i18n="select_user_option">-- Ø§Ø®ØªØ± Ù…Ø³ØªØ®Ø¯Ù… --</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="pointsAmount" data-i18n="points_amount">Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø·</label>
                            <input type="number" id="pointsAmount" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø·">
                        </div>
                        <button id="addPointsBtn" class="btn btn-success" data-i18n="add_points">Ø¥Ø¶Ø§ÙØ© Ù†Ù‚Ø§Ø·</button>
                        <button id="removePointsBtn" class="btn btn-danger" data-i18n="remove_points">Ø®ØµÙ… Ù†Ù‚Ø§Ø·</button>
                        <button id="resetPointsBtn" class="btn btn-warning" data-i18n="reset_points">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
                    </div>
                </div>
            </div>
            
            <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ø¬Ø¯ÙŠØ¯ -->
            <div class="tab-content" id="archiveTab">
                <div class="archive-container">
                    <div class="archive-filters">
                        <select id="archiveType" class="form-group" style="width: auto;">
                            <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø³Ø¬Ù„Ø§Øª</option>
                            <option value="dark_chats">Ø§Ù„Ø¯Ø±Ø¯Ø´Ø§Øª Ø§Ù„Ù…Ø¸Ù„Ù…Ø©</option>
                            <option value="projects">Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</option>
                            <option value="users">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</option>
                            <option value="system">Ø§Ù„Ù†Ø¸Ø§Ù…</option>
                        </select>
                        <input type="date" id="archiveDate" class="form-group" style="width: auto;">
                        <button class="btn btn-primary" onclick="loadArchive()" data-i18n="load_archive">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø±Ø´ÙŠÙ</button>
                    </div>
                    <div id="archiveContent">
                        <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø£Ø±Ø´ÙŠÙ ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                    </div>
                </div>
            </div>
            
            <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© - ÙŠØ¸Ù‡Ø± Ù„Ù„Ù…Ø¯ÙŠØ± ÙˆØ§Ù„Ù†Ø¸Ø§Ù… ÙÙ‚Ø· -->
            <div class="tab-content" id="adminTab">
                <div class="admin-panel">
                    <div class="admin-card">
                        <h3 data-i18n="member_management">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</h3>
                        <div class="form-group">
                            <label for="memberSelect" data-i18n="select_member">Ø§Ø®ØªØ± Ø§Ù„Ø¹Ø¶Ùˆ</label>
                            <select id="memberSelect">
                                <option value="" data-i18n="select_member_option">-- Ø§Ø®ØªØ± Ø¹Ø¶ÙˆØ§ --</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="newName" data-i18n="change_username">ØªØºÙŠÙŠØ± Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                            <input type="text" id="newName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯" data-i18n-placeholder="new_username_placeholder">
                        </div>
                        <div class="form-group">
                            <label for="rankSelect" data-i18n="change_rank">ØªØºÙŠÙŠØ± Ø§Ù„Ø±ØªØ¨Ø©</label>
                            <select id="rankSelect">
                                <option value="d" data-i18n="rank_d">D</option>
                                <option value="c" data-i18n="rank_c">C</option>
                                <option value="b" data-i18n="rank_b">B</option>
                                <option value="a" data-i18n="rank_a">A</option>
                                <option value="s" data-i18n="rank_s">S</option>
                                <option value="system" data-i18n="rank_system">SYSTEM</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="banDuration" data-i18n="ban_duration">Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø£ÙŠØ§Ù…)</label>
                            <input type="number" id="banDuration" placeholder="Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø­Ø¸Ø± (0 Ù„Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø­Ø¸Ø±)" data-i18n-placeholder="ban_duration_placeholder">
                        </div>
                        <button id="updateMemberBtn" class="btn btn-primary" data-i18n="apply_changes">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</button>
                        <button id="kickUserBtn" class="btn btn-warning" data-i18n="kick_user">Ø·Ø±Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</button>
                        <button id="banUserBtn" class="btn btn-danger" data-i18n="ban_user">Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</button>
                        <button id="removeUserBtn" class="btn btn-danger" data-i18n="remove_user">Ø­Ø°Ù Ù†Ù‡Ø§Ø¦ÙŠ</button>
                    </div>
                    
                    <div class="admin-card">
                        <h3 data-i18n="system_control">Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
                        <button id="clearAllBtn" class="btn btn-danger" style="margin-bottom: 10px;" data-i18n="clear_messages">Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</button>
                        <button id="exportDataBtn" class="btn btn-success" style="margin-bottom: 10px;" data-i18n="export_data">ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                        <button id="systemInfoBtn" class="btn btn-primary" style="margin-bottom: 10px;" data-i18n="system_info">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</button>
                        <button id="viewAllChatsBtn" class="btn btn-warning" data-i18n="view_all_chats">Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø§Øª Ø§Ù„Ù…Ø¸Ù„Ù…Ø©</button>
                        <button id="deleteAllUsersBtn" class="btn btn-danger" style="margin-top: 10px;" data-i18n="delete_all_users">Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</button>
                    </div>
                    
                    <div class="admin-card">
                        <h3 data-i18n="system_stats">Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
                        <div id="systemStats" class="hacker-terminal">
                            <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù… -->
                        </div>
                    </div>

                    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø±ØªØ¨Ø© -->
                    <div class="admin-card">
                        <h3>Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±ØªØ¨Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>
                        <div id="rankFeaturesList" style="padding:10px; color:#ddd;">
                            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ù‡Ù†Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª -->
                        </div>
                    </div>

                    <!-- Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ±Ù‚ÙŠØ§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø© -->
                    <div class="admin-card" id="pendingPromotionsCard">
                        <h3>Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ±Ù‚ÙŠØ§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</h3>
                        <div id="pendingPromotionsList">
                            <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                        </div>
                    </div>

                    <!-- Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø®Ø§ØµØ© - ØªØ¸Ù‡Ø± Ù„Ù„Ù†Ø¸Ø§Ù… ÙÙ‚Ø· -->
                    <div class="admin-card" id="systemToolsCard" style="display: none;">
                        <h3 class="system-glitch" data-i18n="special_system_tools">Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø®Ø§ØµØ© ğŸš€</h3>
                        <div class="system-features-grid">
                            <div class="system-feature-card" onclick="massPromotion()">
                                <div class="system-feature-icon">â¬†ï¸</div>
                                <div data-i18n="mass_promotion">ØªØ±Ù‚ÙŠØ© Ø¬Ù…Ø§Ø¹ÙŠØ©</div>
                            </div>
                            <div class="system-feature-card" onclick="resetSystem()">
                                <div class="system-feature-icon">ğŸ”„</div>
                                <div data-i18n="reset_system">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</div>
                            </div>
                            <div class="system-feature-card" onclick="createFakeActivity()">
                                <div class="system-feature-icon">ğŸ¤–</div>
                                <div data-i18n="fake_activity">Ù†Ø´Ø§Ø· ÙˆÙ‡Ù…ÙŠ</div>
                            </div>
                            <div class="system-feature-card" onclick="emergencyLockdown()">
                                <div class="system-feature-icon">ğŸ”’</div>
                                <div data-i18n="emergency_lockdown">ÙˆØ¶Ø¹ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</div>
                            </div>
                            <div class="system-feature-card" onclick="hackMode()">
                                <div class="system-feature-icon">âš¡</div>
                                <div data-i18n="hack_mode">ÙˆØ¶Ø¹ Ø§Ù„Ù‡Ø§ÙƒØ±</div>
                            </div>
                            <div class="system-feature-card" onclick="earthControl()">
                                <div class="system-feature-icon">ğŸŒ</div>
                                <div data-i18n="earth_control">ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø±Ø¶</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ØµÙØ­Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø§Øª Ø§Ù„Ù…Ø¸Ù„Ù…Ø© -->
    <div id="darkChatsModal" class="dark-chats-modal">
        <div class="modal-header">
            <h2 data-i18n="dark_chats_log">ğŸ“‹ Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø§Øª Ø§Ù„Ù…Ø¸Ù„Ù…Ø©</h2>
            <button class="modal-close" onclick="closeDarkChatsModal()" data-i18n="close_button">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
        <div id="darkChatsList">
            <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø§Øª Ø§Ù„Ù…Ø¸Ù„Ù…Ø© ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
        </div>
    </div>

    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…ÙˆØ³Ø¹Ø©
        let currentUser = null;
        let users = JSON.parse(localStorage.getItem('shadowRootUsers')) || [];
        let messages = JSON.parse(localStorage.getItem('shadowRootMessages')) || [];
    let privateMessages = JSON.parse(localStorage.getItem('shadowRootPrivateMessages')) || [];
    // privateUnread[fromId] = { toId: count }
    let privateUnread = JSON.parse(localStorage.getItem('shadowRootPrivateUnread')) || {};
    // per-user message colors
    let userColors = JSON.parse(localStorage.getItem('shadowRootUserColors')) || {};
        let darkChatRooms = JSON.parse(localStorage.getItem('shadowRootDarkRooms')) || [];
        let projects = JSON.parse(localStorage.getItem('shadowRootProjects')) || [];
    let pendingPromotions = JSON.parse(localStorage.getItem('shadowRootPendingPromotions')) || [];
        let userPoints = JSON.parse(localStorage.getItem('shadowRootUserPoints')) || {};
        let dailyLogin = JSON.parse(localStorage.getItem('shadowRootDailyLogin')) || {};
        let systemArchive = JSON.parse(localStorage.getItem('shadowRootArchive')) || [];
        let currentDarkRoom = null;
        let secretMode = false;
        let selectedPrivateUser = null;
        let currentLanguage = 'ar';

        // Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø­Ø¬ÙˆØ¨Ø©
        const reservedUsernames = ['00', '01', '02', '03', '04', '05', '06', '07', '08', '09'];

        // ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø±ØªØ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„Ù…ÙˆØ³Ø¹Ø©
        const rankPermissions = {
            'system': ['all', 'earth_control', 'view_archive', 'manage_points', 'view_closed_dark_chats'],
            's': ['manage_users', 'view_reports', 'ban_users', 'delete_messages', 'promote_users', 'view_dark_chats', 'verify_projects'],
            'a': ['manage_juniors', 'view_stats', 'create_rooms', 'join_rooms', 'submit_projects'],
            'b': ['create_rooms', 'join_rooms', 'submit_projects'],
            'c': ['join_rooms', 'submit_projects'],
            'd': ['basic_chat', 'submit_projects']
        };

        // ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ù…ÙˆØ³Ø¹Ø©
        const translations = {
            'ar': {
                'app_title': 'Shadow Root',
                'app_subtitle': 'Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø³Ø±ÙŠ',
                'login_tab': 'Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù†Ø¸Ø§Ù…',
                'register_tab': 'Ø§Ù†Ø¶Ù…Ø§Ù… Ø¬Ø¯ÙŠØ¯',
                'username_label': 'Ø§Ù„Ù…Ø¹Ø±Ù Ø§Ù„Ø³Ø±ÙŠ',
                'username_placeholder': 'Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¹Ø±Ù Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ',
                'password_label': 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±',
                'password_placeholder': 'Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø³Ø±ÙŠØ©',
                'login_button': 'ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„',
                'login_hint': 'Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ø­Ù…ÙŠ Ø¨ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„ØªØ´ÙÙŠØ± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©',
                'choose_username': 'Ø§Ø®ØªØ± Ù…Ø¹Ø±ÙÙ‹Ø§ Ø³Ø±ÙŠÙ‹Ø§',
                'username_hint': 'Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù…: 00-09',
                'username_reserved': 'Ø§Ù„Ù…Ø¹Ø±ÙØ§Øª 00-09 Ù…Ø­Ø¬ÙˆØ²Ø© Ù„Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„Ù‚ÙŠØ§Ø¯Ø©',
                'choose_password': 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø³Ø±ÙŠØ©',
                'password_hint': 'Ø§Ø®ØªØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ©',
                'confirm_password': 'ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±',
                'confirm_password_placeholder': 'Ø£Ø¹Ø¯ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±',
                'register_button': 'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯',
                'team_title': 'ÙØ±ÙŠÙ‚ Shadow Root',
                'broadcast_button': 'ğŸ“¢ Ø¨Ø« Ø¹Ø§Ù…',
                'logout_button': 'Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©',
                'public_chat': 'Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¹Ø§Ù…Ø©',
                'dark_chat': 'Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù…Ø¸Ù„Ù…Ø©',
                'members_tab': 'Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡',
                'private_messages': 'Ø§Ù„Ù…Ø±Ø§Ø³Ù„Ø© Ø§Ù„Ø®Ø§ØµØ©',
                'admin_panel': 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…',
                'message_placeholder': 'Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§...',
                'private_message_placeholder': 'Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©...',
                'send_button': 'Ø¥Ø±Ø³Ø§Ù„',
                'create_room': 'Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯Ø©',
                'create_room_desc': 'Ø£Ù†Ø´Ø¦ ØºØ±ÙØ© Ø¯Ø±Ø¯Ø´Ø© Ù…Ø¤Ù‚ØªØ© Ø¨Ø±Ù…Ø² Ø³Ø±ÙŠ',
                'join_room': 'Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ ØºØ±ÙØ©',
                'join_room_desc': 'Ø§Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„ØºØ±ÙØ© Ù„Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ Ø¯Ø±Ø¯Ø´Ø© Ù…Ø¤Ù‚ØªØ©',
                'dark_chat_room': 'Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù…Ø¸Ù„Ù…Ø© - Ø§Ù„ØºØ±ÙØ©:',
                'leave_room': 'Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„ØºØ±ÙØ©',
                'leadership_ranks': 'Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ù„ÙŠØ§',
                'programmer_ranks': 'ÙØ±ÙŠÙ‚ Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ÙŠÙ†',
                'rank_system': 'SYSTEM',
                'rank_s': 'S',
                'rank_a': 'A',
                'rank_b': 'B',
                'rank_c': 'C',
                'rank_d': 'D',
                'your_features': 'Ù…ÙŠØ²Ø§Øª Ø±ØªØ¨ØªÙƒ',
                'admin_tools': 'ğŸ› ï¸ Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­ÙƒÙ…',
                'view_dark_chats': 'ğŸ” Ø§Ù„Ø¯Ø±Ø¯Ø´Ø§Øª Ø§Ù„Ù…Ø¸Ù„Ù…Ø©',
                'system_broadcast': 'ğŸ“¢ Ø§Ù„Ø¨Ø« Ø§Ù„Ø¹Ø§Ù…',
                'system_tools': 'âš¡ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù…',
                'project_verification': 'âœ… ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹',
                'points_system': 'ğŸ† Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø·',
                'system_archive': 'ğŸ“š Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ù†Ø¸Ø§Ù…',
                'earth_features': 'ğŸŒ Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø£Ø±Ø¶',
                'member_management': 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©',
                'select_member': 'Ø§Ø®ØªØ± Ø§Ù„Ø¹Ø¶Ùˆ',
                'select_member_option': '-- Ø§Ø®ØªØ± Ø¹Ø¶ÙˆØ§ --',
                'change_username': 'ØªØºÙŠÙŠØ± Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…',
                'new_username_placeholder': 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯',
                'change_rank': 'ØªØºÙŠÙŠØ± Ø§Ù„Ø±ØªØ¨Ø©',
                'ban_duration': 'Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø£ÙŠØ§Ù…)',
                'ban_duration_placeholder': 'Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø­Ø¸Ø± (0 Ù„Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø­Ø¸Ø±)',
                'apply_changes': 'ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª',
                'kick_user': 'Ø·Ø±Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…',
                'ban_user': 'Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…',
                'remove_user': 'Ø­Ø°Ù Ù†Ù‡Ø§Ø¦ÙŠ',
                'system_control': 'Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù†Ø¸Ø§Ù…',
                'clear_messages': 'Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„',
                'export_data': 'ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
                'system_info': 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…',
                'view_all_chats': 'Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø§Øª Ø§Ù„Ù…Ø¸Ù„Ù…Ø©',
                'delete_all_users': 'Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª',
                'system_stats': 'Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù…',
                'special_system_tools': 'Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø®Ø§ØµØ© ğŸš€',
                'mass_promotion': 'ØªØ±Ù‚ÙŠØ© Ø¬Ù…Ø§Ø¹ÙŠØ©',
                'reset_system': 'Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†',
                'fake_activity': 'Ù†Ø´Ø§Ø· ÙˆÙ‡Ù…ÙŠ',
                'emergency_lockdown': 'ÙˆØ¶Ø¹ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦',
                'hack_mode': 'ÙˆØ¶Ø¹ Ø§Ù„Ù‡Ø§ÙƒØ±',
                'earth_control': 'ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø±Ø¶',
                'dark_chats_log': 'ğŸ“‹ Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø§Øª Ø§Ù„Ù…Ø¸Ù„Ù…Ø©',
                'close_button': 'Ø¥ØºÙ„Ø§Ù‚',
                'verify_project': 'ØªÙˆØ«ÙŠÙ‚ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯',
                'project_name': 'Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹',
                'project_name_placeholder': 'Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹',
                'project_description': 'ÙˆØµÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹',
                'project_description_placeholder': 'Ø£Ø¯Ø®Ù„ ÙˆØµÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹',
                'project_images': 'ØµÙˆØ± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹',
                'project_images_hint': 'ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ Ø¹Ø¯Ø© ØµÙˆØ± Ù„Ù„Ù…Ø´Ø±ÙˆØ¹',
                'submit_project': 'ØªÙ‚Ø¯ÙŠÙ… Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©',
                'my_projects': 'Ù…Ø´Ø§Ø±ÙŠØ¹ÙŠ',
                'review_projects': 'Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹',
                'your_points': 'Ù†Ù‚Ø§Ø·Ùƒ',
                'points_leaderboard': 'ØªØµÙ†ÙŠÙ Ø§Ù„Ù†Ù‚Ø§Ø·',
                'how_to_earn': 'ÙƒÙŠÙÙŠØ© ÙƒØ³Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·',
                'daily_login': 'Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…ÙŠ',
                'verified_project': 'Ù…Ø´Ø±ÙˆØ¹ Ù…ÙˆØ«Ù‚',
                'active_participation': 'Ù…Ø´Ø§Ø±ÙƒØ© ÙØ¹Ø§Ù„Ø©',
                'special_achievements': 'Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø®Ø§ØµØ©',
                'manage_points': 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ù‚Ø§Ø·',
                'select_user': 'Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…',
                'select_user_option': '-- Ø§Ø®ØªØ± Ù…Ø³ØªØ®Ø¯Ù… --',
                'points_amount': 'Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø·',
                'add_points': 'Ø¥Ø¶Ø§ÙØ© Ù†Ù‚Ø§Ø·',
                'remove_points': 'Ø®ØµÙ… Ù†Ù‚Ø§Ø·',
                'reset_points': 'Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†',
                'project_submitted': 'ØªÙ… ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­',
                'project_approved': 'ØªÙ… ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹',
                'project_rejected': 'ØªÙ… Ø±ÙØ¶ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹',
                'points_added': 'ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ù‚Ø§Ø·',
                'points_removed': 'ØªÙ… Ø®ØµÙ… Ø§Ù„Ù†Ù‚Ø§Ø·',
                'points_reset': 'ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù‚Ø§Ø·',
                'load_archive': 'ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø±Ø´ÙŠÙ'
            },
            'en': {
                'app_title': 'Shadow Root',
                'app_subtitle': 'Secret System',
                'login_tab': 'Login to System',
                'register_tab': 'New Member',
                'username_label': 'Secret ID',
                'username_placeholder': 'Enter your ID',
                'password_label': 'Password',
                'password_placeholder': 'Enter your secret password',
                'login_button': 'Activate Login',
                'login_hint': 'System protected by advanced encryption',
                'choose_username': 'Choose a secret ID',
                'username_hint': 'Cannot use: 00-09',
                'username_reserved': 'IDs 00-09 reserved for system and leadership',
                'choose_password': 'Secret Password',
                'password_hint': 'Choose a strong password',
                'confirm_password': 'Confirm Password',
                'confirm_password_placeholder': 'Re-enter password',
                'register_button': 'Create New Account',
                'team_title': 'Shadow Root Team',
                'broadcast_button': 'ğŸ“¢ Broadcast',
                'logout_button': 'End Session',
                'public_chat': 'Public Chat',
                'dark_chat': 'Dark Chat',
                'members_tab': 'Members',
                'private_messages': 'Private Messages',
                'admin_panel': 'Control Panel',
                'message_placeholder': 'Type your message here...',
                'private_message_placeholder': 'Type your private message...',
                'send_button': 'Send',
                'create_room': 'Create New Room',
                'create_room_desc': 'Create a temporary chat room with secret code',
                'join_room': 'Join Room',
                'join_room_desc': 'Enter room code to join temporary chat',
                'dark_chat_room': 'Dark Chat - Room:',
                'leave_room': 'Leave Room',
                'leadership_ranks': 'High Command',
                'programmer_ranks': 'Programmer Team',
                'rank_system': 'SYSTEM',
                'rank_s': 'S',
                'rank_a': 'A',
                'rank_b': 'B',
                'rank_c': 'C',
                'rank_d': 'D',
                'your_features': 'Your Features',
                'admin_tools': 'ğŸ› ï¸ Control Tools',
                'view_dark_chats': 'ğŸ” Dark Chats',
                'system_broadcast': 'ğŸ“¢ Broadcast',
                'system_tools': 'âš¡ System Tools',
                'project_verification': 'âœ… Project Verification',
                'points_system': 'ğŸ† Points System',
                'system_archive': 'ğŸ“š System Archive',
                'earth_features': 'ğŸŒ Earth Features',
                'member_management': 'Advanced Member Management',
                'select_member': 'Select Member',
                'select_member_option': '-- Select Member --',
                'change_username': 'Change Username',
                'new_username_placeholder': 'New Username',
                'change_rank': 'Change Rank',
                'ban_duration': 'Ban User (Days)',
                'ban_duration_placeholder': 'Ban duration in days (0 to unban)',
                'apply_changes': 'Apply Changes',
                'kick_user': 'Kick User',
                'ban_user': 'Ban User',
                'remove_user': 'Permanent Delete',
                'system_control': 'System Control',
                'clear_messages': 'Clear All Messages',
                'export_data': 'Export Data',
                'system_info': 'System Info',
                'view_all_chats': 'View All Dark Chats',
                'delete_all_users': 'Delete All Accounts',
                'system_stats': 'System Statistics',
                'special_system_tools': 'Special System Tools ğŸš€',
                'mass_promotion': 'Mass Promotion',
                'reset_system': 'Reset System',
                'fake_activity': 'Fake Activity',
                'emergency_lockdown': 'Emergency Lockdown',
                'hack_mode': 'Hack Mode',
                'earth_control': 'Earth Control',
                'dark_chats_log': 'ğŸ“‹ Dark Chats Log',
                'close_button': 'Close',
                'verify_project': 'Verify New Project',
                'project_name': 'Project Name',
                'project_name_placeholder': 'Enter project name',
                'project_description': 'Project Description',
                'project_description_placeholder': 'Enter project description',
                'project_images': 'Project Images',
                'project_images_hint': 'You can upload multiple project images',
                'submit_project': 'Submit for Review',
                'my_projects': 'My Projects',
                'review_projects': 'Review Projects',
                'your_points': 'Your Points',
                'points_leaderboard': 'Points Leaderboard',
                'how_to_earn': 'How to Earn Points',
                'daily_login': 'Daily Login',
                'verified_project': 'Verified Project',
                'active_participation': 'Active Participation',
                'special_achievements': 'Special Achievements',
                'manage_points': 'Manage Points',
                'select_user': 'Select User',
                'select_user_option': '-- Select User --',
                'points_amount': 'Points Amount',
                'add_points': 'Add Points',
                'remove_points': 'Remove Points',
                'reset_points': 'Reset Points',
                'project_submitted': 'Project submitted successfully',
                'project_approved': 'Project verified',
                'project_rejected': 'Project rejected',
                'points_added': 'Points added',
                'points_removed': 'Points removed',
                'points_reset': 'Points reset',
                'load_archive': 'Load Archive'
            }
            // Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù„ØºØ§Øª...
        };

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…ÙˆØ³Ø¹Ø©
        document.addEventListener('DOMContentLoaded', function() {
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
            if (users.length === 0) {
                const systemUser = {
                    id: "system_00",
                    username: "00",
                    password: "sys123sys",
                    rank: "system",
                    status: "online",
                    banned: false,
                    banUntil: null,
                    removed: false,
                    joinDate: new Date().toISOString()
                };

                users.push(systemUser);
                saveUsers();
                // ensure system has a color
                if (!userColors[systemUser.id]) {
                    userColors[systemUser.id] = assignColorToUser(systemUser.id);
                    localStorage.setItem('shadowRootUserColors', JSON.stringify(userColors));
                }
            }

            // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø· Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ÙŠÙ†
            // Use the "in" operator so that 0 is treated as a valid value (not falsy)
            users.forEach(user => {
                if (!(user.id in userPoints)) {
                    userPoints[user.id] = 0;
                }
            });
            saveUserPoints();

            // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ø±Ø´ÙŠÙ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
            if (systemArchive.length === 0) {
                systemArchive = [{
                    id: Date.now(),
                    type: 'system',
                    action: 'system_init',
                    description: 'ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©',
                    timestamp: new Date().toISOString(),
                    user: 'system'
                }];
                saveArchive();
            }

            // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ØºØ©
            const languageSelect = document.getElementById('languageSelect');
            languageSelect.addEventListener('change', function() {
                currentLanguage = this.value;
                updateLanguage();
            });

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„
            const savedUser = localStorage.getItem('shadowRootCurrentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø­Ø¸Ø±
                checkBanStatus();
                
                // Ù…Ù†Ø­ Ù†Ù‚Ø§Ø· Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…ÙŠ
                awardDailyLoginPoints();
                
                showMainApp();
            }
            
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
            setupEventListeners();
        });

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„ØºØ©
        function updateLanguage() {
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    element.textContent = translations[currentLanguage][key];
                }
            });

            document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.getAttribute('data-i18n-placeholder');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    element.placeholder = translations[currentLanguage][key];
                }
            });

            // ØªØ­Ø¯ÙŠØ« Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù†Øµ
            if (currentLanguage === 'ar') {
                document.documentElement.dir = 'rtl';
            } else {
                document.documentElement.dir = 'ltr';
            }
        }

        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø³ØªÙ…Ø¹ÙŠÙ† Ù„Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…ÙˆØ³Ø¹Ø©
        function setupEventListeners() {
            // ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨
            document.querySelectorAll('.login-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.login-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.login-content').forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    document.getElementById(this.dataset.tab + 'Content').classList.add('active');
                });
            });
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            document.getElementById('loginBtn').addEventListener('click', handleLogin);
            document.getElementById('loginPassword').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') handleLogin();
            });
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨
            document.getElementById('registerBtn').addEventListener('click', handleRegister);
            document.getElementById('registerConfirmPassword').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') handleRegister();
            });
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
            document.getElementById('logoutBtn').addEventListener('click', handleLogout);
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©
            document.getElementById('sendMessageBtn').addEventListener('click', sendMessage);
            document.getElementById('messageInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendMessage();
            });
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© ÙÙŠ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù…Ø¸Ù„Ù…Ø©
            document.getElementById('sendDarkMessageBtn').addEventListener('click', sendDarkMessage);
            document.getElementById('darkMessageInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendDarkMessage();
            });

            // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø®Ø§ØµØ©
            document.getElementById('sendPrivateMessageBtn').addEventListener('click', sendPrivateMessage);
            document.getElementById('privateMessageInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendPrivateMessage();
            });
            
            // Ø§Ù„Ø¨Ø« Ø§Ù„Ø¹Ø§Ù…
            document.getElementById('broadcastBtn').addEventListener('click', sendSystemBroadcast);
            
            // Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    // Only activate content if user has permission for special tabs
                    const tabContentId = this.dataset.tab + 'Tab';
                    // archive tab visibility check
                    if (this.dataset.tab === 'archive' && !hasPermission('view_archive')) {
                        alert('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ø£Ø±Ø´ÙŠÙ');
                        return;
                    }
                    const contentEl = document.getElementById(tabContentId);
                    if (contentEl) contentEl.classList.add('active');
                    
                    if (this.dataset.tab === 'private') {
                        loadPrivateUsers();
                    } else if (this.dataset.tab === 'verification') {
                        loadUserProjects();
                        loadVerifiedProjects();
                    } else if (this.dataset.tab === 'points') {
                        loadPointsData();
                    } else if (this.dataset.tab === 'archive') {
                        loadArchive();
                    }
                });
            });
            
            // Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù…Ø¸Ù„Ù…Ø©
            document.getElementById('createRoomBtn').addEventListener('click', createDarkRoom);
            document.getElementById('joinRoomBtn').addEventListener('click', joinDarkRoom);
            document.getElementById('leaveRoomBtn').addEventListener('click', leaveDarkRoom);
            
            // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡
            document.getElementById('updateMemberBtn').addEventListener('click', updateMember);
            document.getElementById('kickUserBtn').addEventListener('click', kickUser);
            document.getElementById('banUserBtn').addEventListener('click', banUser);
            document.getElementById('removeUserBtn').addEventListener('click', removeUser);
            document.getElementById('deleteAllUsersBtn').addEventListener('click', deleteAllUsers);
            
            // Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ©
            document.getElementById('secretBtn').addEventListener('click', toggleSecretFeatures);
            
            // Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù†Ø¸Ø§Ù…
            document.getElementById('clearAllBtn').addEventListener('click', clearAllMessages);
            document.getElementById('exportDataBtn').addEventListener('click', exportData);
            document.getElementById('systemInfoBtn').addEventListener('click', showSystemInfo);
            document.getElementById('viewAllChatsBtn').addEventListener('click', viewAllDarkChats);
            
            // Ø£Ø­Ø¯Ø§Ø« Ø¬Ø¯ÙŠØ¯Ø©
            document.getElementById('submitProjectBtn').addEventListener('click', submitProject);
            document.getElementById('addPointsBtn').addEventListener('click', addPoints);
            document.getElementById('removePointsBtn').addEventListener('click', removePoints);
            document.getElementById('resetPointsBtn').addEventListener('click', resetPoints);

            // Export / Import backups
            const exportBtn = document.getElementById('exportBackupBtn');
            if (exportBtn) exportBtn.addEventListener('click', exportDataBackup);
            const importBtn = document.getElementById('importBackupBtn');
            const importInput = document.getElementById('importBackupInput');
            if (importBtn && importInput) {
                importBtn.addEventListener('click', function() {
                    importInput.click();
                });
                importInput.addEventListener('change', function(e) {
                    const f = e.target.files[0];
                    if (f) importDataBackup(f);
                });
            }
        }

        // ØªÙˆÙ„ÙŠØ¯ Ù…Ø¹Ø±Ù ÙØ±ÙŠØ¯ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
        function generateUserId() {
            return Date.now().toString();
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…ÙˆØ³Ø¹Ø©
        function hasPermission(permission) {
            if (currentUser.rank === 'system') return true;
            return rankPermissions[currentUser.rank]?.includes(permission) || false;
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø¸Ø±
        function checkBanStatus() {
            if (currentUser && currentUser.banned && new Date(currentUser.banUntil) > new Date()) {
                const remainingTime = Math.ceil((new Date(currentUser.banUntil) - new Date()) / (1000 * 60 * 60 * 24));
                alert(`Ø£Ù†Øª Ù…Ø­Ø¸ÙˆØ±! Ù…ØªØ¨Ù‚ÙŠ ${remainingTime} Ø£ÙŠØ§Ù…`);
                handleLogout();
                return false;
            }
            return true;
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        function handleLogin() {
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value.trim();
            
            if (!username || !password) {
                alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„');
                return;
            }
            
            const user = users.find(u => u.username === username && !u.removed);
            
            if (!user) {
                alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± ØµØ­ÙŠØ­');
                return;
            }

            if (user.removed) {
                alert('ØªÙ… Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨. Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ¹ØªÙ‚Ø¯ Ø£Ù† Ù‡Ø°Ø§ Ø®Ø·Ø£ØŒ ÙŠØ±Ø¬Ø§Ø¡ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø±ØªØ¨Ø© SYSTEM.');
                return;
            }
            
            if (user.password !== password) {
                alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
                return;
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø¸Ø±
            if (user.banned && new Date(user.banUntil) > new Date()) {
                const remainingTime = Math.ceil((new Date(user.banUntil) - new Date()) / (1000 * 60 * 60 * 24));
                alert(`Ø£Ù†Øª Ù…Ø­Ø¸ÙˆØ±! Ù…ØªØ¨Ù‚ÙŠ ${remainingTime} Ø£ÙŠØ§Ù…`);
                return;
            }
            
            user.banned = false;
            user.banUntil = null;
            user.status = "online";
            
            currentUser = user;
            localStorage.setItem('shadowRootCurrentUser', JSON.stringify(currentUser));
            saveUsers();
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
            addToArchive('user_login', `ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${username}`);
            
            showMainApp();
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨
        function handleRegister() {
            const username = document.getElementById('registerUsername').value.trim();
            const password = document.getElementById('registerPassword').value.trim();
            const confirmPassword = document.getElementById('registerConfirmPassword').value.trim();
            
            if (!username || !password || !confirmPassword) {
                alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©');
                return;
            }
            
            if (reservedUsernames.includes(username)) {
                alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­Ø¬ÙˆØ²ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ø³Ù… Ø¢Ø®Ø±');
                return;
            }
            
            if (users.find(u => u.username === username && !u.removed)) {
                alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ù…Ø³Ø¨Ù‚Ø§Ù‹');
                return;
            }
            
            const newUser = {
                id: generateUserId(),
                username: username,
                password: password,
                rank: "d",
                status: "online",
                banned: false,
                banUntil: null,
                removed: false,
                joinDate: new Date().toISOString()
            };
            
            users.push(newUser);
            saveUsers();

            // assign a color for the new user
            if (!userColors[newUser.id]) {
                userColors[newUser.id] = assignColorToUser(newUser.id);
                localStorage.setItem('shadowRootUserColors', JSON.stringify(userColors));
            }
            
            // Ø¥Ø¶Ø§ÙØ© Ù†Ù‚Ø§Ø· Ø¨Ø¯Ø§ÙŠØ©
            userPoints[newUser.id] = 0;
            saveUserPoints();
            
            // ØªØ³Ø¬ÙŠÙ„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
            addToArchive('user_register', `Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ${username}`);
            
            alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„');
            
            // Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰ ØªØ¨ÙˆÙŠØ¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            document.querySelectorAll('.login-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.login-content').forEach(c => c.classList.remove('active'));
            document.querySelector('.login-tab[data-tab="login"]').classList.add('active');
            document.getElementById('loginContent').classList.add('active');
            
            // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„
            document.getElementById('registerUsername').value = '';
            document.getElementById('registerPassword').value = '';
            document.getElementById('registerConfirmPassword').value = '';
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
        function handleLogout() {
            if (currentUser) {
                // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                addToArchive('user_logout', `ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${currentUser.username}`);
                
                currentUser.status = "offline";
                saveUsers();
            }
            
            currentUser = null;
            localStorage.removeItem('shadowRootCurrentUser');
            
            document.getElementById('mainApp').style.display = 'none';
            document.getElementById('loginScreen').style.display = 'flex';
            
            // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„
            document.getElementById('loginUsername').value = '';
            document.getElementById('loginPassword').value = '';
        }

        // Ø¹Ø±Ø¶ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù…Ø¹ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
        function showMainApp() {
            if (!checkBanStatus()) return;
            
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('mainApp').style.display = 'flex';
            
            // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            document.getElementById('userName').textContent = currentUser.username;
            document.getElementById('userRank').textContent = getRankName(currentUser.rank);
            document.getElementById('userPoints').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${userPoints[currentUser.id] || 0}`;
            document.getElementById('userAvatar').textContent = currentUser.username.charAt(0).toUpperCase();
            document.getElementById('userAvatar').className = `user-avatar avatar-${currentUser.rank}`;
            document.getElementById('userStatus').innerHTML = `
                <span class="user-status status-${currentUser.status}"></span>
                ${currentUser.status === 'online' ? 'Ù†Ø´Ø·' : 'ØºÙŠØ± Ù†Ø´Ø·'}
            `;
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø­Ø³Ø¨ Ø§Ù„Ø±ØªØ¨Ø©
            updatePermissionsUI();
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            loadMessages();
            loadMembers();
            updateMemberSelect();
            updateSystemStats();
            loadPointsData();
            updatePointsUserSelect();
            // initialize private users and unread badge
            loadPrivateUsers();
            updatePrivateTabBadge();
            
            // Ø¥Ø¸Ù‡Ø§Ø± ØªØ¨ÙˆÙŠØ¨ÙŠ Ø§Ù„ØªÙˆØ«ÙŠÙ‚ ÙˆØ§Ù„Ù†Ù‚Ø§Ø· Ù„Ù„Ø¬Ù…ÙŠØ¹
            const vTab = document.querySelector('.tab[data-tab="verification"]');
            const pTab = document.querySelector('.tab[data-tab="points"]');
            const aTab = document.querySelector('.tab[data-tab="archive"]');
            if (vTab) vTab.classList.add('visible');
            if (pTab) pTab.classList.add('visible');
            // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±ØªØ¨Ø© Ø¯Ø§Ø®Ù„ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
            renderRankFeatures();
        }

        // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø­Ø³Ø¨ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…ÙˆØ³Ø¹Ø©
        function updatePermissionsUI() {
            // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
            const adminTabBtn = document.querySelector('.tab[data-tab="admin"]');
            if (hasPermission('manage_users')) {
                if (adminTabBtn) adminTabBtn.classList.add('visible');
            } else {
                if (adminTabBtn) adminTabBtn.classList.remove('visible');
            }

            // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø±Ø§Ø³Ù„Ø© Ø§Ù„Ø®Ø§ØµØ©
            const privateTabBtn = document.querySelector('.tab[data-tab="private"]');
            if (privateTabBtn) privateTabBtn.classList.add('visible');

            // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø²Ø± Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ©
            if (hasPermission('manage_users') || hasPermission('view_reports')) {
                document.getElementById('secretBtn').style.display = 'block';
                document.getElementById('secretFeatures').style.display = 'block';
            } else {
                document.getElementById('secretBtn').style.display = 'none';
                document.getElementById('secretFeatures').style.display = 'none';
            }

            // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø²Ø± Ø§Ù„Ø¨Ø« Ø§Ù„Ø¹Ø§Ù… (Ù„Ù„Ø³Ø³ØªÙ… ÙÙ‚Ø·)
            if (currentUser.rank === 'system') {
                document.getElementById('broadcastBtn').style.display = 'block';
                document.getElementById('systemToolsCard').style.display = 'block';
                document.getElementById('reviewProjectsCard').style.display = 'block';
                document.getElementById('managePointsCard').style.display = 'block';
                document.getElementById('earthFeaturesItem').style.display = 'block';
            } else {
                document.getElementById('broadcastBtn').style.display = 'none';
                document.getElementById('systemToolsCard').style.display = 'none';
                document.getElementById('reviewProjectsCard').style.display = 'none';
                document.getElementById('managePointsCard').style.display = 'none';
                document.getElementById('earthFeaturesItem').style.display = 'none';
            }

            // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø¯Ø±Ø¯Ø´Ø§Øª Ø§Ù„Ù…Ø¸Ù„Ù…Ø©
            if (!hasPermission('view_dark_chats')) {
                document.getElementById('darkChatsItem').style.display = 'none';
            }

            // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø£Ø±Ø¶
            if (!hasPermission('earth_control')) {
                document.getElementById('earthFeaturesItem').style.display = 'none';
            }

            // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±ØªØ¨Ø© Ø¯Ø§Ø®Ù„ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
            renderRankFeatures();
        }

        // Ø¹Ø±Ø¶ Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±ØªØ¨Ø© Ø¯Ø§Ø®Ù„ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
        function renderRankFeatures() {
            const container = document.getElementById('rankFeaturesList');
            if (!container) return;

            let features = [];
            if (!currentUser) {
                container.innerHTML = '<em>Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø±Ø¤ÙŠØ© Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±ØªØ¨Ø©</em>';
                return;
            }

            if (currentUser.rank === 'system') {
                // system can do everything
                features = ['ÙƒÙ„ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª: ØªØ±Ù‚ÙŠØ©ØŒ Ø­Ø¸Ø±ØŒ Ø­Ø°ÙØŒ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ù‚Ø§Ø·ØŒ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø£Ø±Ø´ÙŠÙØŒ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø®Ø§ØµØ©'];
            } else {
                const permList = rankPermissions[currentUser.rank] || [];
                if (permList.length === 0) {
                    features = ['Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙŠØ²Ø§Øª Ø®Ø§ØµØ© Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø±ØªØ¨Ø©'];
                } else {
                    features = permList.slice();
                }
            }

            container.innerHTML = '';
            const ul = document.createElement('ul');
            ul.style.margin = '0';
            ul.style.paddingLeft = '18px';
            features.forEach(f => {
                const li = document.createElement('li');
                li.textContent = f;
                ul.appendChild(li);
            });
            container.appendChild(ul);
        }

        // ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø±Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø±Ø§Ø³Ù„Ø© Ø§Ù„Ø®Ø§ØµØ©
        function updatePrivateTabBadge() {
            const total = Object.keys(privateUnread).reduce((sum, fromId) => {
                const inner = privateUnread[fromId] || {};
                return sum + Object.values(inner).reduce((s, v) => s + (Number(v) || 0), 0);
            }, 0);
            const privateTab = document.querySelector('.tab[data-tab="private"]');
            if (!privateTab) return;
            let badge = privateTab.querySelector('.tab-unread');
            if (!badge) {
                badge = document.createElement('span');
                badge.className = 'tab-unread';
                badge.style.background = 'var(--accent)';
                badge.style.color = '#000';
                badge.style.padding = '2px 6px';
                badge.style.borderRadius = '12px';
                badge.style.marginLeft = '8px';
                badge.style.fontSize = '12px';
                privateTab.appendChild(badge);
            }
            badge.textContent = total > 0 ? total : '';
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù…Ø¹ ØªÙ†Ø³ÙŠÙ‚ Ø®Ø§Øµ Ù„Ù„Ø±ØªØ¨ ÙˆØ§Ù„Ù†Ù‚Ø§Ø·
        function sendMessage() {
            if (!checkBanStatus()) return;
            
            const messageInput = document.getElementById('messageInput');
            const messageText = messageInput.value.trim();
            
            if (!messageText) return;
            
            const message = {
                id: Date.now(),
                userId: currentUser.id,
                userName: currentUser.username,
                userRank: currentUser.rank,
                userPoints: userPoints[currentUser.id] || 0,
                text: messageText,
                timestamp: new Date().toISOString(),
                banned: false
            };
            
            messages.push(message);
            saveMessages();
            
            // Ø¥Ø¶Ø§ÙØ© Ù†Ù‚Ø§Ø· Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ©
            addUserPoints(currentUser.id, 1);
            
            loadMessages();
            
            messageInput.value = '';
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
            addToArchive('chat_message', `Ø±Ø³Ø§Ù„Ø© Ù…Ù† ${currentUser.username}: ${messageText.substring(0, 50)}...`);
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ù…Ø¹ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø®Ø§Øµ Ø§Ù„Ù…ÙˆØ³Ø¹
        function loadMessages() {
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = '';
            
            messages.forEach(msg => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${msg.banned ? 'banned' : ''} ${msg.userRank} ${msg.isBroadcast ? 'broadcast-message' : ''} message-with-points`;
                
                const messageHeader = document.createElement('div');
                messageHeader.className = 'message-header';
                
                const senderSpan = document.createElement('span');
                senderSpan.className = `message-sender sender-${msg.userRank}`;
                
                // Ø¥Ø¶Ø§ÙØ© Ø´Ø§Ø±Ø© Ø®Ø§ØµØ© Ù„Ù„Ø±ØªØ¨ Ù…Ø¹ Ø§Ù„Ù†Ù‚Ø§Ø·
                let rankBadge = '';
                if (msg.userRank === 'system') {
                    rankBadge = `ğŸ‘‘ <span style="color: gold;">SYSTEM</span>`;
                } else if (msg.userRank === 's') {
                    rankBadge = `âš¡ <span style="color: var(--rank-s);">S</span>`;
                } else if (msg.userRank === 'a') {
                    rankBadge = `ğŸ”§ <span style="color: var(--rank-a);">A</span>`;
                } else if (msg.userRank === 'b') {
                    rankBadge = `ğŸ’» <span style="color: var(--rank-b);">B</span>`;
                } else if (msg.userRank === 'c') {
                    rankBadge = `ğŸ‘¨â€ğŸ’» <span style="color: var(--rank-c);">C</span>`;
                } else {
                    rankBadge = `ğŸ“ <span style="color: var(--rank-d);">D</span>`;
                }
                
                if (msg.isBroadcast) {
                    senderSpan.innerHTML = `<div class="broadcast-header">ğŸ“¢ ${rankBadge}: ${msg.userName}</div>`;
                } else {
                    senderSpan.innerHTML = `${rankBadge} ${msg.userName} <span style="color: var(--hacker-green); font-size: 10px;">(${msg.userPoints || 0} Ù†Ù‚Ø·Ø©)</span>`;
                }
                
                const timeSpan = document.createElement('span');
                timeSpan.textContent = new Date(msg.timestamp).toLocaleTimeString();
                
                messageHeader.appendChild(senderSpan);
                messageHeader.appendChild(timeSpan);
                
                const messageText = document.createElement('div');
                // Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© Ø¸Ù‡ÙˆØ± HTML ÙÙŠ Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
                if (msg.isBroadcast) {
                    messageText.innerHTML = msg.text;
                } else {
                    messageText.textContent = msg.banned ? '[Ø±Ø³Ø§Ù„Ø© Ù…Ø­Ø°ÙˆÙØ©]' : msg.text;
                }
                
                const messageActions = document.createElement('div');
                messageActions.className = 'message-actions';
                
                // ÙŠÙ…ÙƒÙ† Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø­Ø°Ù Ø±Ø³Ø§Ø¦Ù„Ù‡ ÙÙ‚Ø·ØŒ Ø§Ù„Ù…Ø¯ÙŠØ± ÙˆØ§Ù„Ù†Ø¸Ø§Ù… ÙŠÙ…ÙƒÙ†Ù‡Ù… Ø­Ø°Ù Ø£ÙŠ Ø±Ø³Ø§Ù„Ø©
                if (currentUser.id === msg.userId || hasPermission('delete_messages')) {
                    const deleteBtn = document.createElement('button');
                    deleteBtn.className = 'delete-btn';
                    deleteBtn.textContent = 'Ø­Ø°Ù';
                    deleteBtn.onclick = function() {
                        deleteMessage(msg.id);
                    };
                    messageActions.appendChild(deleteBtn);
                    
                    // Ø§Ù„Ù…Ø¯ÙŠØ± ÙˆØ§Ù„Ù†Ø¸Ø§Ù… ÙÙ‚Ø· ÙŠÙ…ÙƒÙ†Ù‡Ù… Ø­Ø¸Ø± Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
                    if (hasPermission('ban_users') && !msg.banned) {
                        const banBtn = document.createElement('button');
                        banBtn.className = 'ban-btn';
                        banBtn.textContent = 'Ø­Ø¸Ø±';
                        banBtn.onclick = function() {
                            banMessage(msg.id);
                        };
                        messageActions.appendChild(banBtn);
                    }
                }
                
                messageDiv.appendChild(messageHeader);
                messageDiv.appendChild(messageText);
                messageDiv.appendChild(messageActions);
                
                // Ø¥Ø¶Ø§ÙØ© Ù…Ø¤Ø´Ø± Ø§Ù„Ù†Ù‚Ø§Ø· Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ Ø°Ø§Øª Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø¹Ø§Ù„ÙŠØ©
                if (msg.userPoints >= 50 && !msg.isBroadcast) {
                    const pointsIndicator = document.createElement('div');
                    pointsIndicator.className = 'points-indicator';
                    pointsIndicator.textContent = 'â˜…';
                    messageDiv.appendChild(pointsIndicator);
                }
                
                chatMessages.appendChild(messageDiv);
            });
            
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø« Ø¹Ø§Ù… (Ù„Ù„Ø³Ø³ØªÙ… ÙÙ‚Ø·)
        function sendSystemBroadcast() {
            if (currentUser.rank !== 'system') {
                alert('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„Ù„Ø¨Ø« Ø§Ù„Ø¹Ø§Ù…');
                return;
            }
            
            const broadcastMessage = prompt('Ø£Ø¯Ø®Ù„ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¨Ø« Ø§Ù„Ø¹Ø§Ù…:');
            if (!broadcastMessage) return;
            
            const message = {
                id: Date.now(),
                userId: "system",
                userName: "00",
                userRank: "system",
                userPoints: 9999,
                text: `ğŸ“¢ <span style="color: gold; text-shadow: 0 0 10px gold;">SYSTEM BROADCAST:</span> ${broadcastMessage}`,
                timestamp: new Date().toISOString(),
                banned: false,
                isBroadcast: true
            };
            
            messages.push(message);
            saveMessages();
            loadMessages();
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¨Ø« ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
            addToArchive('system_broadcast', `Ø¨Ø« Ù†Ø¸Ø§Ù…ÙŠ: ${broadcastMessage}`);
            
            alert('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø« Ø§Ù„Ø¹Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­');
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù„Ù„Ù…Ø±Ø§Ø³Ù„Ø© Ø§Ù„Ø®Ø§ØµØ©
        function loadPrivateUsers() {
            const privateUsersList = document.getElementById('privateUsersList');
            privateUsersList.innerHTML = '';
            
            users.forEach(user => {
                if (user.id !== currentUser.id && !user.removed) {
                    const userItem = document.createElement('div');
                    userItem.className = 'private-user-item';
                    userItem.dataset.userId = user.id;

                    // unread messages from this user to currentUser
                    const convUnread = (privateUnread[user.id] && privateUnread[user.id][currentUser.id]) ? privateUnread[user.id][currentUser.id] : 0;
                    const unreadBadgeHTML = convUnread > 0 ? `<span class="unread-badge">${convUnread}</span>` : '';

                    userItem.innerHTML = `
                        <div style="font-weight: bold;">${user.username} ${unreadBadgeHTML}</div>
                        <div style="font-size: 12px; color: #aaa;">${getRankName(user.rank)} | ${userPoints[user.id] || 0} Ù†Ù‚Ø·Ø©</div>
                    `;
                    
                    userItem.addEventListener('click', function() {
                        document.querySelectorAll('.private-user-item').forEach(item => {
                            item.classList.remove('active');
                        });
                        this.classList.add('active');
                        selectedPrivateUser = user.id;
                        // mark conversation as read for messages from this user to currentUser
                        if (privateUnread[user.id]) {
                            privateUnread[user.id][currentUser.id] = 0;
                            savePrivateUnread();
                        }
                        updatePrivateTabBadge();
                        loadPrivateMessagesWithUser(user.id);
                    });
                    
                    privateUsersList.appendChild(userItem);
                }
            });
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø§ØµØ© Ù…Ø¹ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¹ÙŠÙ†
        function loadPrivateMessagesWithUser(userId) {
            const privateMessagesContainer = document.getElementById('privateMessages');
            privateMessagesContainer.innerHTML = '';
            
            const userPrivateMessages = privateMessages.filter(msg => 
                (msg.senderId === currentUser.id && msg.recipientId === userId) ||
                (msg.senderId === userId && msg.recipientId === currentUser.id)
            );
            
            userPrivateMessages.sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));
            
            userPrivateMessages.forEach(msg => {
                // Skip message if current user marked it deleted
                if (msg.deletedBy && msg.deletedBy[currentUser.id]) return;

                const messageDiv = document.createElement('div');
                messageDiv.className = 'message';

                const isSent = msg.senderId === currentUser.id;
                const senderName = msg.senderName || users.find(u => u.id === msg.senderId)?.username || 'Ù…Ø³ØªØ®Ø¯Ù…';
                const recipientName = msg.recipientName || users.find(u => u.id === msg.recipientId)?.username || 'Ù…Ø³ØªØ®Ø¯Ù…';

                messageDiv.style.borderLeftColor = isSent ? 'var(--success)' : 'var(--warning)';
                messageDiv.style.background = isSent ?
                    'linear-gradient(45deg, rgba(0, 184, 148, 0.2), rgba(0, 0, 0, 0.3))' :
                    'linear-gradient(45deg, rgba(253, 203, 110, 0.2), rgba(0, 0, 0, 0.3))';

                const messageHeader = document.createElement('div');
                messageHeader.className = 'message-header';

                const senderSpan = document.createElement('span');
                senderSpan.className = 'message-sender';
                const senderColor = getUserMessageColor(msg.senderId);
                senderSpan.innerHTML = `<span style="display:inline-block;width:10px;height:10px;border-radius:50%;background:${senderColor};margin-inline-start:6px;vertical-align:middle;"></span> ${senderName} â†’ ${recipientName}`;
                senderSpan.style.color = '#fff';
                senderSpan.style.background = 'rgba(0,0,0,0.15)';
                senderSpan.style.padding = '4px 8px';
                senderSpan.style.borderRadius = '6px';
                senderSpan.style.borderLeft = `6px solid ${senderColor}`;

                const timeSpan = document.createElement('span');
                timeSpan.textContent = new Date(msg.timestamp).toLocaleTimeString();

                messageHeader.appendChild(senderSpan);
                messageHeader.appendChild(timeSpan);

                const messageText = document.createElement('div');
                messageText.textContent = msg.text;

                const messageActions = document.createElement('div');
                messageActions.className = 'message-actions';

                // Allow sender or recipient to mark message deleted for themselves
                if (currentUser.id === msg.senderId || currentUser.id === msg.recipientId) {
                    const deleteBtn = document.createElement('button');
                    deleteBtn.className = 'delete-btn';
                    deleteBtn.textContent = 'Ø­Ø°Ù';
                    deleteBtn.onclick = function() { deletePrivateMessage(msg.id); };
                    messageActions.appendChild(deleteBtn);
                }

                messageDiv.appendChild(messageHeader);
                messageDiv.appendChild(messageText);
                messageDiv.appendChild(messageActions);

                privateMessagesContainer.appendChild(messageDiv);
            });
            
            privateMessagesContainer.scrollTop = privateMessagesContainer.scrollHeight;
            // mark conversation read (clear unread count)
            if (privateUnread[userId] && privateUnread[userId][currentUser.id]) {
                privateUnread[userId][currentUser.id] = 0;
                savePrivateUnread();
                updatePrivateTabBadge();
            }
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø®Ø§ØµØ©
        function sendPrivateMessage() {
            if (!selectedPrivateUser) {
                alert('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø³ØªÙ„Ù… Ø£ÙˆÙ„Ø§Ù‹');
                return;
            }
            
            const messageInput = document.getElementById('privateMessageInput');
            const messageText = messageInput.value.trim();
            
            if (!messageText) {
                alert('ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø±Ø³Ø§Ù„Ø©');
                return;
            }
            
            const privateMessage = {
                id: Date.now(),
                senderId: currentUser.id,
                senderName: currentUser.username,
                recipientName: users.find(u => u.id === selectedPrivateUser)?.username || 'Ù…Ø³ØªØ®Ø¯Ù…',
                recipientId: selectedPrivateUser,
                text: messageText,
                timestamp: new Date().toISOString(),
                read: false
            };
            
            privateMessages.push(privateMessage);
            savePrivateMessages();
            // increment unread counter for recipient (senderId -> recipientId)
            if (!privateUnread[currentUser.id]) privateUnread[currentUser.id] = {};
            if (!privateUnread[currentUser.id][selectedPrivateUser]) privateUnread[currentUser.id][selectedPrivateUser] = 0;
            privateUnread[currentUser.id][selectedPrivateUser] += 1;
            savePrivateUnread();
            updatePrivateTabBadge();
            loadPrivateMessagesWithUser(selectedPrivateUser);
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø§ØµØ© ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
            addToArchive('private_message', `Ø±Ø³Ø§Ù„Ø© Ø®Ø§ØµØ© Ù…Ù† ${currentUser.username} Ø¥Ù„Ù‰ ${users.find(u => u.id === selectedPrivateUser)?.username}`);
            
            messageInput.value = '';
        }

        // Ø­Ø°Ù Ø±Ø³Ø§Ù„Ø© Ø®Ø§ØµØ© Ù„Ù„Ù…ØªØ¹Ù„Ù‚ Ø§Ù„Ø­Ø§Ù„ÙŠ - Ø¹Ù„Ø§Ù…Ø© Ø­Ø°Ù Ù„ÙƒÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù„Ù‰ Ø­Ø¯Ø©
        function deletePrivateMessage(messageId) {
            const msg = privateMessages.find(m => m.id === messageId);
            if (!msg) return;

            // initialize deletedBy map if absent
            if (!msg.deletedBy) msg.deletedBy = {};
            msg.deletedBy[currentUser.id] = true;

            // if both sender and recipient marked deleted, remove message permanently
            const senderDeleted = !!msg.deletedBy[msg.senderId];
            const recipientDeleted = !!msg.deletedBy[msg.recipientId];

            if (senderDeleted && recipientDeleted) {
                const idx = privateMessages.findIndex(m => m.id === messageId);
                if (idx !== -1) privateMessages.splice(idx, 1);
            }

            savePrivateMessages();
            // also, if current user was recipient and there was an unread count from sender, decrement/clear
            if (msg.senderId && privateUnread[msg.senderId] && privateUnread[msg.senderId][currentUser.id]) {
                privateUnread[msg.senderId][currentUser.id] = Math.max(0, privateUnread[msg.senderId][currentUser.id] - 1);
                savePrivateUnread();
                updatePrivateTabBadge();
            }

            loadPrivateMessagesWithUser(selectedPrivateUser);
        }

        // Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø®Ø§ØµØ© Ø§Ù„Ù…ÙˆØ³Ø¹Ø©
        function massPromotion() {
            if (currentUser.rank !== 'system') return;
            
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ±Ù‚ÙŠØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ Ø¥Ù„Ù‰ Ø±ØªØ¨Ø© AØŸ')) {
                users.forEach(user => {
                    if (user.rank === 'd' || user.rank === 'c' || user.rank === 'b') {
                        user.rank = 'a';
                    }
                });
                saveUsers();
                loadMembers();
                
                // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØ±Ù‚ÙŠØ© ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                addToArchive('mass_promotion', 'ØªØ±Ù‚ÙŠØ© Ø¬Ù…Ø§Ø¹ÙŠØ© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ Ø¥Ù„Ù‰ Ø±ØªØ¨Ø© A');
                
                alert('ØªÙ…Øª Ø§Ù„ØªØ±Ù‚ÙŠØ© Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!');
            }
        }

        function resetSystem() {
            if (currentUser.rank !== 'system') return;
            
            if (confirm('âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø³ÙŠÙ…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª! Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ')) {
                if (confirm('âŒ ØªØ£ÙƒÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠ: Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø³ÙŠØªÙ… Ø­Ø°ÙÙ‡Ø§ ÙˆÙ„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ±Ø¬Ø§Ø¹Ù‡Ø§!')) {
                    // ØªØ³Ø¬ÙŠÙ„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                    addToArchive('system_reset', 'Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„');
                    
                    localStorage.clear();
                    location.reload();
                }
            }
        }

        function createFakeActivity() {
            if (currentUser.rank !== 'system') return;
            
            const fakeMessages = [
                "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ø§Ù„Ø¬Ù…ÙŠØ¹ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…! ğŸ‘‹",
                "Ù†Ø¸Ø§Ù… Shadow Root ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ù…Ù…ØªØ§Ø² ğŸš€",
                "Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ… Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ÙØ¹Ø§Ù„Ø© ğŸ’ª",
                "Ù†Ø±Ø­Ø¨ Ø¨Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø¯ ÙÙŠ ÙØ±ÙŠÙ‚Ù†Ø§ ğŸŒŸ",
                "Ø§Ù„Ù†Ø¸Ø§Ù… Ø¢Ù…Ù† ÙˆÙ…Ø­Ù…ÙŠ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ ğŸ”’"
            ];
            
            fakeMessages.forEach((text, index) => {
                setTimeout(() => {
                    const message = {
                        id: Date.now() + index,
                        userId: "system_fake",
                        userName: "Ù†Ø¸Ø§Ù…",
                        userRank: "system",
                        text: text,
                        timestamp: new Date().toISOString(),
                        banned: false
                    };
                    messages.push(message);
                    saveMessages();
                    if (index === fakeMessages.length - 1) {
                        loadMessages();
                        
                        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„ÙˆÙ‡Ù…ÙŠ ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                        addToArchive('fake_activity', 'Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø´Ø§Ø· ÙˆÙ‡Ù…ÙŠ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…');
                        
                        alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„ÙˆÙ‡Ù…ÙŠ Ø¨Ù†Ø¬Ø§Ø­!');
                    }
                }, index * 1000);
            });
        }

        function emergencyLockdown() {
            if (currentUser.rank !== 'system') return;
            
            if (confirm('ğŸš¨ ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦: Ø³ÙŠØªÙ… ØºÙ„Ù‚ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØºØ±Ù ÙˆØ­Ø¸Ø± Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¹Ø§Ù…Ø©!')) {
                // ØºÙ„Ù‚ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØºØ±Ù
                darkChatRooms.forEach(room => {
                    room.active = false;
                });
                
                // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ù†Ø¸Ø§Ù…
                const systemMessage = {
                    id: Date.now(),
                    userId: "system",
                    userName: "00",
                    userRank: "system",
                    text: "ğŸš¨ <span style='color: red; text-shadow: 0 0 10px red;'>SYSTEM LOCKDOWN:</span> ØªÙ… ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦! Ø¬Ù…ÙŠØ¹ Ø§Ù„ØºØ±Ù Ù…ØºÙ„Ù‚Ø© Ù…Ø¤Ù‚ØªØ§Ù‹.",
                    timestamp: new Date().toISOString(),
                    banned: false,
                    isBroadcast: true
                };
                
                messages.push(systemMessage);
                saveMessages();
                saveDarkRooms();
                loadMessages();
                
                // ØªØ³Ø¬ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                addToArchive('emergency_lockdown', 'ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…');
                
                alert('ØªÙ… ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ Ø¨Ù†Ø¬Ø§Ø­!');
            }
        }

        function hackMode() {
            if (currentUser.rank !== 'system') return;
            
            document.body.style.animation = 'glitch 0.5s infinite';
            setTimeout(() => {
                document.body.style.animation = '';
                
                // ØªØ³Ø¬ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ù‡Ø§ÙƒØ± ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                addToArchive('hack_mode', 'ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ù‡Ø§ÙƒØ± ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…');
                
                alert('âš¡ ØªÙ… ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ù‡Ø§ÙƒØ±! Ø§Ù„Ù†Ø¸Ø§Ù… ÙÙŠ Ø£Ø¹Ù„Ù‰ Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†');
            }, 2000);
        }

        function earthControl() {
            if (currentUser.rank !== 'system') return;
            
            const earthFeatures = `
                ğŸŒ Ø£Ø¯ÙˆØ§Øª ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø±Ø¶ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©:
                
                1. ğŸ” Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø§Øª Ø§Ù„Ù…ØºÙ„Ù‚Ø©
                2. ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©
                3. ğŸ›¡ï¸ Ø­Ù…Ø§ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ù„Ù†Ø¸Ø§Ù…
                4. ğŸ”„ Ø§Ù„Ø³ÙŠØ·Ø±Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ø¹Ù„Ù‰ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
                5. ğŸ“œ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒØ§Ù…Ù„Ø©
                
                Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø¯ÙˆØ§Øª ØªÙ…Ù†Ø­Ùƒ ØªØ­ÙƒÙ… ÙƒØ§Ù…Ù„ ÙÙŠ Ù†Ø¸Ø§Ù… Shadow Root!
            `;
            
            alert(earthFeatures);
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø£Ø±Ø¶ ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
            addToArchive('earth_control', 'Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø¯ÙˆØ§Øª ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø±Ø¶ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©');
        }

        // Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª (Ø¨Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø§Ù„Ù†Ø¸Ø§Ù…)
        function deleteAllUsers() {
            if (currentUser.rank !== 'system') {
                alert('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª');
                return;
            }
            
            if (confirm('âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø³ÙŠØ­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø¨Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø§Ù„Ù†Ø¸Ø§Ù…!')) {
                users = users.filter(user => user.rank === 'system');
                saveUsers();
                loadMembers();
                updateMemberSelect();
                
                // ØªØ³Ø¬ÙŠÙ„ Ø­Ø°Ù Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                addToArchive('delete_all_users', 'Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†');
                
                alert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!');
            }
        }

        // ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø© Ù…Ø­Ø¯Ø«Ø©
        function getRankName(rank) {
            const rankNames = {
                'system': 'ğŸ‘‘ SYSTEM',
                's': 'âš¡ S',
                'a': 'ğŸ”§ A',
                'b': 'ğŸ’» B',
                'c': 'ğŸ‘¨â€ğŸ’» C',
                'd': 'ğŸ“ D'
            };
            
            return rankNames[rank] || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
        }
        
        function getRankColor(rank) {
            const rankColors = {
                'system': 'var(--rank-system)',
                's': 'var(--rank-s)',
                'a': 'var(--rank-a)',
                'b': 'var(--rank-b)',
                'c': 'var(--rank-c)',
                'd': 'var(--rank-d)'
            };
            
            return rankColors[rank] || 'var(--light)';
        }

        // Message color helpers
        const colorPalette = ['#00b894','#0984e3','#6c5ce7','#e84393','#fdcb6e','#e17055','#00cec9','#ffeaa7','#fab1a0'];

        function assignColorToUser(userId) {
            // pick a color deterministically if possible
            const idx = Math.abs(hashCode(userId)) % colorPalette.length;
            return colorPalette[idx];
        }

        function hashCode(str) {
            let h = 0;
            for (let i = 0; i < str.length; i++) {
                h = (h << 5) - h + str.charCodeAt(i);
                h |= 0; // convert to 32bit int
            }
            return h;
        }

        function getUserMessageColor(userId) {
            if (!userColors[userId]) {
                userColors[userId] = assignColorToUser(userId);
                localStorage.setItem('shadowRootUserColors', JSON.stringify(userColors));
            }
            return userColors[userId];
        }

        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ localStorage
        function saveUsers() {
            localStorage.setItem('shadowRootUsers', JSON.stringify(users));
        }
        
        function saveMessages() {
            localStorage.setItem('shadowRootMessages', JSON.stringify(messages));
        }
        
        function savePrivateMessages() {
            localStorage.setItem('shadowRootPrivateMessages', JSON.stringify(privateMessages));
        }

        function savePrivateUnread() {
            localStorage.setItem('shadowRootPrivateUnread', JSON.stringify(privateUnread));
        }
        
        function saveDarkRooms() {
            localStorage.setItem('shadowRootDarkRooms', JSON.stringify(darkChatRooms));
        }
        
        function saveProjects() {
            localStorage.setItem('shadowRootProjects', JSON.stringify(projects));
        }
        
        function saveUserPoints() {
            localStorage.setItem('shadowRootUserPoints', JSON.stringify(userPoints));
        }
        
        function saveDailyLogin() {
            localStorage.setItem('shadowRootDailyLogin', JSON.stringify(dailyLogin));
        }
        
        function saveArchive() {
            localStorage.setItem('shadowRootArchive', JSON.stringify(systemArchive));
        }

        // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
        function addToArchive(type, description) {
            const archiveItem = {
                id: Date.now(),
                type: type,
                action: type,
                description: description,
                timestamp: new Date().toISOString(),
                user: currentUser ? currentUser.username : 'system'
            };
            
            systemArchive.push(archiveItem);
            saveArchive();
        }

        // Pending promotions helpers
        function savePendingPromotions() {
            localStorage.setItem('shadowRootPendingPromotions', JSON.stringify(pendingPromotions));
        }

        function requestPromotion(userId, targetRank) {
            // Create a pending promotion that requires SYSTEM approval
            const user = users.find(u => u.id === userId);
            if (!user) return alert('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');

            // if already pending, ignore
            if (pendingPromotions.find(p => p.userId === userId && p.targetRank === targetRank && p.status === 'pending')) {
                return alert('Ù‡Ù†Ø§Ùƒ Ø·Ù„Ø¨ ØªØ±Ù‚ÙŠØ© Ù…Ø¹Ù„Ù‚ Ø¨Ø§Ù„ÙØ¹Ù„ Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
            }

            const req = {
                id: Date.now(),
                userId: userId,
                username: user.username,
                currentRank: user.rank,
                targetRank: targetRank,
                requestedAt: new Date().toISOString(),
                status: 'pending',
                handledBy: null,
                handledAt: null
            };

            pendingPromotions.push(req);
            savePendingPromotions();
            renderPendingPromotions();
            addToArchive('request_promotion', `Ø·Ù„Ø¨ ØªØ±Ù‚ÙŠØ© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ${user.username} Ø¥Ù„Ù‰ Ø±ØªØ¨Ø© ${targetRank}`);
            alert('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØªØ±Ù‚ÙŠØ©ØŒ ÙŠÙ†ØªØ¸Ø± Ù…ÙˆØ§ÙÙ‚Ø© SYSTEM');
        }

        function renderPendingPromotions() {
            const list = document.getElementById('pendingPromotionsList');
            if (!list) return;
            list.innerHTML = '';

            if (pendingPromotions.length === 0) {
                list.innerHTML = '<p style="color:#aaa">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ù…Ø¹Ù„Ù‚Ø©</p>';
                return;
            }

            pendingPromotions.slice().reverse().forEach(req => {
                const row = document.createElement('div');
                row.className = 'pending-promo';
                row.style.padding = '8px';
                row.style.borderBottom = '1px solid rgba(255,255,255,0.04)';
                row.innerHTML = `<div><strong>${req.username}</strong> Ø·Ù„Ø¨ Ø§Ù„ØªØ±Ù‚ÙŠØ© Ù…Ù† ${req.currentRank} Ø¥Ù„Ù‰ ${req.targetRank} â€” ${new Date(req.requestedAt).toLocaleString()}</div>`;

                if (req.status === 'pending' && currentUser && currentUser.rank === 'system') {
                    const actions = document.createElement('div');
                    actions.style.marginTop = '6px';
                    const approve = document.createElement('button');
                    approve.className = 'btn btn-success';
                    approve.textContent = 'Ù…ÙˆØ§ÙÙ‚Ø© SYSTEM';
                    approve.onclick = function() { approvePromotion(req.id); };
                    const reject = document.createElement('button');
                    reject.className = 'btn btn-danger';
                    reject.style.marginLeft = '8px';
                    reject.textContent = 'Ø±ÙØ¶';
                    reject.onclick = function() { rejectPromotion(req.id); };
                    actions.appendChild(approve);
                    actions.appendChild(reject);
                    row.appendChild(actions);
                } else {
                    const status = document.createElement('div');
                    status.style.marginTop = '6px';
                    status.style.color = '#aaa';
                    status.textContent = `Ø§Ù„Ø­Ø§Ù„Ø©: ${req.status}`;
                    row.appendChild(status);
                }

                list.appendChild(row);
            });
        }

        function approvePromotion(requestId) {
            if (!currentUser || currentUser.rank !== 'system') return alert('ÙÙ‚Ø· SYSTEM ÙŠÙ…ÙƒÙ†Ù‡ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ±Ù‚ÙŠØ§Øª');
            const req = pendingPromotions.find(p => p.id === requestId);
            if (!req) return alert('Ø·Ù„Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');

            const user = users.find(u => u.id === req.userId);
            if (!user) return alert('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');

            user.rank = req.targetRank;
            req.status = 'approved';
            req.handledBy = currentUser.username;
            req.handledAt = new Date().toISOString();

            saveUsers();
            savePendingPromotions();
            renderPendingPromotions();
            loadMembers();
            addToArchive('approve_promotion', `ØªÙ…Øª ØªØ±Ù‚ÙŠØ© ${user.username} Ø¥Ù„Ù‰ ${req.targetRank} Ø¨ÙˆØ§Ø³Ø·Ø© ${currentUser.username}`);
            alert('ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ±Ù‚ÙŠØ©');
        }

        function rejectPromotion(requestId) {
            if (!currentUser || currentUser.rank !== 'system') return alert('ÙÙ‚Ø· SYSTEM ÙŠÙ…ÙƒÙ†Ù‡ Ø±ÙØ¶ Ø§Ù„ØªØ±Ù‚ÙŠØ§Øª');
            const req = pendingPromotions.find(p => p.id === requestId);
            if (!req) return alert('Ø·Ù„Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');

            req.status = 'rejected';
            req.handledBy = currentUser.username;
            req.handledAt = new Date().toISOString();
            savePendingPromotions();
            renderPendingPromotions();
            addToArchive('reject_promotion', `Ø±ÙØ¶ ØªØ±Ù‚ÙŠØ© ${req.username} Ø¥Ù„Ù‰ ${req.targetRank} Ø¨ÙˆØ§Ø³Ø·Ø© ${currentUser.username}`);
            alert('ØªÙ… Ø±ÙØ¶ Ø·Ù„Ø¨ Ø§Ù„ØªØ±Ù‚ÙŠØ©');
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
        function loadArchive() {
            const archiveContent = document.getElementById('archiveContent');
            archiveContent.innerHTML = '';
            
            const archiveType = document.getElementById('archiveType').value;
            const archiveDate = document.getElementById('archiveDate').value;
            
            let filteredArchive = systemArchive;
            
            if (archiveType !== 'all') {
                filteredArchive = filteredArchive.filter(item => item.type === archiveType);
            }
            
            if (archiveDate) {
                filteredArchive = filteredArchive.filter(item => 
                    item.timestamp.startsWith(archiveDate)
                );
            }
            
            if (filteredArchive.length === 0) {
                archiveContent.innerHTML = '<p style="text-align: center; color: #666;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª</p>';
                return;
            }
            
            filteredArchive.reverse().forEach(item => {
                const archiveItem = document.createElement('div');
                archiveItem.className = 'archive-item';
                
                const itemHeader = document.createElement('div');
                itemHeader.className = 'archive-item-header';
                
                const itemInfo = document.createElement('div');
                itemInfo.innerHTML = `
                    <strong>${item.description}</strong>
                    <div style="font-size: 12px; color: #aaa;">
                        ${new Date(item.timestamp).toLocaleString()} | ${item.user}
                    </div>
                `;
                
                itemHeader.appendChild(itemInfo);
                archiveItem.appendChild(itemHeader);
                
                archiveContent.appendChild(archiveItem);
            });
        }

        // ÙˆØ¸Ø§Ø¦Ù Ø¥Ø¶Ø§ÙÙŠØ© ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¥ÙƒÙ…Ø§Ù„
        function deleteMessage(messageId) {
            const messageIndex = messages.findIndex(msg => msg.id === messageId);
            if (messageIndex !== -1) {
                messages.splice(messageIndex, 1);
                saveMessages();
                loadMessages();
                
                // ØªØ³Ø¬ÙŠÙ„ Ø­Ø°Ù Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                addToArchive('delete_message', 'Ø­Ø°Ù Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¹Ø§Ù…Ø©');
            }
        }

        function banMessage(messageId) {
            const message = messages.find(msg => msg.id === messageId);
            if (message) {
                message.banned = true;
                saveMessages();
                loadMessages();
                
                // ØªØ³Ø¬ÙŠÙ„ Ø­Ø¸Ø± Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                addToArchive('ban_message', `Ø­Ø¸Ø± Ø±Ø³Ø§Ù„Ø© Ù…Ù† ${message.userName}`);
            }
        }

        function loadMembers() {
            const membersList = document.getElementById('membersList');
            membersList.innerHTML = '';
            
            users.forEach(user => {
                if (!user.removed) {
                    const userCard = document.createElement('div');
                    userCard.className = `user-card ${user.banned ? 'banned' : ''}`;
                    userCard.style.borderLeft = `4px solid ${getRankColor(user.rank)}`;
                    
                    const userHeader = document.createElement('div');
                    userHeader.className = 'user-card-header';
                    
                    const userInfo = document.createElement('div');
                    userInfo.innerHTML = `
                        <strong>${user.username}</strong> - ${getRankName(user.rank)}
                        <div style="font-size: 12px; color: #aaa;">
                            ${user.status === 'online' ? 'ğŸŸ¢ Ù…ØªØµÙ„' : 'ğŸ”´ ØºÙŠØ± Ù…ØªØµÙ„'}
                            ${user.banned ? ' | ğŸ”´ Ù…Ø­Ø¸ÙˆØ±' : ''}
                            <br>Ø§Ù„Ù†Ù‚Ø§Ø·: ${userPoints[user.id] || 0}
                        </div>
                    `;
                    
                    userHeader.appendChild(userInfo);
                    
                    if (hasPermission('manage_users') && user.id !== currentUser.id) {
                        const userActions = document.createElement('div');
                        userActions.className = 'user-actions';
                        
                        const banBtn = document.createElement('button');
                        banBtn.className = 'btn btn-warning';
                        banBtn.textContent = user.banned ? 'ÙÙƒ Ø§Ù„Ø­Ø¸Ø±' : 'Ø­Ø¸Ø±';
                        banBtn.onclick = function() {
                            toggleBanUser(user.id);
                        };
                        
                        const kickBtn = document.createElement('button');
                        kickBtn.className = 'btn btn-danger';
                        kickBtn.textContent = 'Ø·Ø±Ø¯';
                        kickBtn.onclick = function() {
                            kickUser(user.id);
                        };
                        
                        userActions.appendChild(banBtn);
                        userActions.appendChild(kickBtn);
                        userHeader.appendChild(userActions);
                    }
                    
                    userCard.appendChild(userHeader);
                    
                    if (user.banned && user.banUntil) {
                        const banDuration = document.createElement('div');
                        banDuration.className = 'ban-duration';
                        banDuration.textContent = `ÙŠÙ†ØªÙ‡ÙŠ Ø§Ù„Ø­Ø¸Ø± ÙÙŠ: ${new Date(user.banUntil).toLocaleDateString()}`;
                        userCard.appendChild(banDuration);
                    }
                    
                    membersList.appendChild(userCard);
                }
            });
        }

        function updateMemberSelect() {
            const memberSelect = document.getElementById('memberSelect');
            memberSelect.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ø¹Ø¶ÙˆØ§ --</option>';
            
            users.forEach(user => {
                if (!user.removed && user.id !== currentUser.id) {
                    const option = document.createElement('option');
                    option.value = user.id;
                    option.textContent = `${user.username} (${getRankName(user.rank)}) - ${userPoints[user.id] || 0} Ù†Ù‚Ø·Ø©`;
                    memberSelect.appendChild(option);
                }
            });
        }

        function updateSystemStats() {
            const systemStats = document.getElementById('systemStats');
            const activeUsers = users.filter(u => !u.removed && u.status === 'online').length;
            const totalUsers = users.filter(u => !u.removed).length;
            const totalMessages = messages.length;
            const bannedUsers = users.filter(u => u.banned && !u.removed).length;
            const totalPrivateMessages = privateMessages.length;
            const totalProjects = projects.length;
            const verifiedProjects = projects.filter(p => p.verified).length;
            
            systemStats.innerHTML = `
                <div class="terminal-line"><span class="terminal-prompt">$</span> Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„Ù†Ø´Ø·ÙˆÙ†: ${activeUsers}</div>
                <div class="terminal-line"><span class="terminal-prompt">$</span> Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†: ${totalUsers}</div>
                <div class="terminal-line"><span class="terminal-prompt">$</span> Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„: ${totalMessages}</div>
                <div class="terminal-line"><span class="terminal-prompt">$</span> Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø§ØµØ©: ${totalPrivateMessages}</div>
                <div class="terminal-line"><span class="terminal-prompt">$</span> Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹: ${totalProjects} (${verifiedProjects} Ù…ÙˆØ«Ù‚)</div>
                <div class="terminal-line"><span class="terminal-prompt">$</span> Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„Ù…Ø­Ø¸ÙˆØ±ÙˆÙ†: ${bannedUsers}</div>
                <div class="terminal-line"><span class="terminal-prompt">$</span> Ø§Ù„Ø¯Ø±Ø¯Ø´Ø§Øª Ø§Ù„Ù…Ø¸Ù„Ù…Ø©: ${darkChatRooms.length}</div>
                <div class="terminal-line"><span class="terminal-prompt">$</span> Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø£Ø±Ø´ÙŠÙ: ${systemArchive.length}</div>
            `;
        }

        function toggleBanUser(userId) {
            const user = users.find(u => u.id === userId);
            if (user) {
                if (user.banned) {
                    user.banned = false;
                    user.banUntil = null;
                    
                    // ØªØ³Ø¬ÙŠÙ„ ÙÙƒ Ø§Ù„Ø­Ø¸Ø± ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                    addToArchive('unban_user', `ÙÙƒ Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${user.username}`);
                } else {
                    const days = prompt('Ø£Ø¯Ø®Ù„ Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø­Ø¸Ø±:');
                    if (days && !isNaN(days)) {
                        user.banned = true;
                        user.banUntil = new Date(Date.now() + parseInt(days) * 24 * 60 * 60 * 1000).toISOString();
                        
                        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¸Ø± ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                        addToArchive('ban_user', `Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${user.username} Ù„Ù…Ø¯Ø© ${days} Ø£ÙŠØ§Ù…`);
                    }
                }
                saveUsers();
                loadMembers();
            }
        }

        function kickUser(userId) {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù…ØŸ (Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡)')) {
                const user = users.find(u => u.id === userId);
                if (user) {
                    user.removed = true;
                    user.status = 'offline';
                    saveUsers();
                    loadMembers();
                    updateMemberSelect();

                    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø°Ù ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                    addToArchive('kick_user', `Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${user.username} Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹`);

                    alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹');
                }
            }
        }

        function updateMember() {
            const memberId = document.getElementById('memberSelect').value;
            const newName = document.getElementById('newName').value.trim();
            const newRank = document.getElementById('rankSelect').value;
            const banDuration = parseInt(document.getElementById('banDuration').value) || 0;
            
            if (!memberId) {
                alert('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø¶Ùˆ');
                return;
            }
            
            const user = users.find(u => u.id === memberId);
            if (!user) return;
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ù„Ù„ØªØ±Ù‚ÙŠØ©
            if (newRank && (newRank === 'system' || newRank === 's')) {
                if (currentUser.rank !== 'system') {
                    alert('Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹ÙŠÙŠÙ† Ù‡Ø°Ù‡ Ø§Ù„Ø±ØªØ¨Ø©. ÙÙ‚Ø· Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠÙ…ÙƒÙ†Ù‡ ØªØ¹ÙŠÙŠÙ† Ø±ØªØ¨Ø© Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆS');
                    return;
                }
            }
            
            if (newName) {
                user.username = newName;
            }
            
            if (newRank) {
                user.rank = newRank;
            }
            
            if (banDuration > 0) {
                user.banned = true;
                user.banUntil = new Date(Date.now() + banDuration * 24 * 60 * 60 * 1000).toISOString();
            } else if (banDuration === 0) {
                user.banned = false;
                user.banUntil = null;
            }
            
            saveUsers();
            loadMembers();
            updateMemberSelect();
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØ­Ø¯ÙŠØ« ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
            addToArchive('update_user', `ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${user.username}`);
            
            alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø¶Ùˆ Ø¨Ù†Ø¬Ø§Ø­');
            
            // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„
            document.getElementById('newName').value = '';
            document.getElementById('banDuration').value = '';
        }

        function removeUser() {
            const memberId = document.getElementById('memberSelect').value;

            if (!memberId) {
                alert('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø¶Ùˆ');
                return;
            }

            if (confirm('âš ï¸ ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡! Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ')) {
                const user = users.find(u => u.id === memberId);
                if (user) {
                    user.removed = true;
                    user.status = 'offline';
                    saveUsers();
                    loadMembers();
                    updateMemberSelect();

                    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø°Ù ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                    addToArchive('remove_user', `Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${user.username} Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹`);

                    alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ø¶Ùˆ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹');
                }
            }
        }

        function clearAllMessages() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!')) {
                messages = [];
                saveMessages();
                loadMessages();
                
                // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³Ø­ ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                addToArchive('clear_messages', 'Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¹Ø§Ù…Ø©');
                
                alert('ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„');
            }
        }

        function exportData() {
            const data = {
                users: users,
                messages: messages,
                privateMessages: privateMessages,
                darkChatRooms: darkChatRooms,
                projects: projects,
                userPoints: userPoints,
                systemArchive: systemArchive,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const a = document.createElement('a');
            a.href = URL.createObjectURL(dataBlob);
            a.download = `shadow-root-backup-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØµØ¯ÙŠØ± ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
            addToArchive('export_data', 'ØªØµØ¯ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…');
            
            alert('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
        }

        function showSystemInfo() {
            const info = `
                Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù…: Shadow Root v4.0
                ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: ${new Date().toLocaleDateString()}
                Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†: ${users.filter(u => !u.removed).length}
                Ø¹Ø¯Ø¯ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„: ${messages.length}
                Ø¹Ø¯Ø¯ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø§Øª Ø§Ù„Ù…Ø¸Ù„Ù…Ø©: ${darkChatRooms.length}
                Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹: ${projects.length}
                Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ: ${currentUser.username}
                Ø±ØªØ¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${getRankName(currentUser.rank)}
                Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${userPoints[currentUser.id] || 0}
                Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…: ğŸŸ¢ Ù†Ø´Ø·
            `;
            
            alert(info);
        }

        function createDarkRoom() {
            const roomCode = Math.random().toString(36).substring(2, 8).toUpperCase();
            
            const newRoom = {
                id: Date.now(),
                code: roomCode,
                creator: currentUser.id,
                members: [currentUser.id],
                messages: [],
                active: true,
                createdAt: new Date().toISOString()
            };
            
            darkChatRooms.push(newRoom);
            saveDarkRooms();
            
            // ØªØ³Ø¬ÙŠÙ„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØºØ±ÙØ© ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
            addToArchive('create_dark_room', `Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© Ù…Ø¸Ù„Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ø±Ù…Ø² ${roomCode}`);
            
            joinDarkRoomWithCode(roomCode);
        }

        function joinDarkRoom() {
            const roomCode = prompt('Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„ØºØ±ÙØ©:');
            if (roomCode) {
                joinDarkRoomWithCode(roomCode.trim().toUpperCase());
            }
        }

        function joinDarkRoomWithCode(roomCode) {
            const room = darkChatRooms.find(r => r.code === roomCode && r.active);
            
            if (!room) {
                alert('Ø§Ù„ØºØ±ÙØ© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© Ø£Ùˆ ØºÙŠØ± Ù†Ø´Ø·Ø©');
                return;
            }
            
            if (!room.members.includes(currentUser.id)) {
                room.members.push(currentUser.id);
                saveDarkRooms();
                
                // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                addToArchive('join_dark_room', `Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ù…Ø¸Ù„Ù…Ø© ${roomCode}`);
            }
            
            currentDarkRoom = room;
            
            document.getElementById('darkChatRoom').style.display = 'block';
            document.querySelector('.dark-chat-options').style.display = 'none';
            document.getElementById('roomCodeDisplay').textContent = roomCode;
            
            loadDarkChatMessages();
        }

        function leaveDarkRoom() {
            if (currentDarkRoom) {
                const memberIndex = currentDarkRoom.members.indexOf(currentUser.id);
                if (memberIndex !== -1) {
                    currentDarkRoom.members.splice(memberIndex, 1);
                }
                
                if (currentDarkRoom.members.length === 0) {
                    currentDarkRoom.active = false;
                    
                    // ØªØ³Ø¬ÙŠÙ„ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØºØ±ÙØ© ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                    addToArchive('close_dark_room', `Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ù…Ø¸Ù„Ù…Ø© ${currentDarkRoom.code}`);
                }
                
                saveDarkRooms();
            }
            
            currentDarkRoom = null;
            document.getElementById('darkChatRoom').style.display = 'none';
            document.querySelector('.dark-chat-options').style.display = 'flex';
        }

        function sendDarkMessage() {
            if (!currentDarkRoom) return;
            
            const messageInput = document.getElementById('darkMessageInput');
            const messageText = messageInput.value.trim();
            
            if (!messageText) return;
            
            const message = {
                id: Date.now(),
                userId: currentUser.id,
                userName: currentUser.username,
                text: messageText,
                timestamp: new Date().toISOString()
            };
            
            currentDarkRoom.messages.push(message);
            saveDarkRooms();
            loadDarkChatMessages();
            
            messageInput.value = '';
        }

        function loadDarkChatMessages() {
            if (!currentDarkRoom) return;
            
            const darkChatMessages = document.getElementById('darkChatMessages');
            darkChatMessages.innerHTML = '';
            
            currentDarkRoom.messages.forEach(msg => {
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message';
                messageDiv.style.background = 'rgba(0, 0, 0, 0.7)';
                messageDiv.style.borderLeft = '4px solid var(--hacker-green)';
                messageDiv.style.color = 'var(--hacker-green)';
                
                const messageHeader = document.createElement('div');
                messageHeader.className = 'message-header';
                
                const senderSpan = document.createElement('span');
                senderSpan.className = 'message-sender';
                senderSpan.textContent = msg.userName;
                senderSpan.style.color = msg.userId === currentUser.id ? 'var(--success)' : 'var(--warning)';
                
                const timeSpan = document.createElement('span');
                timeSpan.textContent = new Date(msg.timestamp).toLocaleTimeString();
                timeSpan.style.color = '#aaa';
                
                messageHeader.appendChild(senderSpan);
                messageHeader.appendChild(timeSpan);
                
                const messageText = document.createElement('div');
                messageText.textContent = msg.text;
                messageText.style.color = 'var(--hacker-green)';
                
                messageDiv.appendChild(messageHeader);
                messageDiv.appendChild(messageText);
                
                darkChatMessages.appendChild(messageDiv);
            });
            
            darkChatMessages.scrollTop = darkChatMessages.scrollHeight;
        }

        function viewAllDarkChats() {
            if (!hasPermission('manage_users')) {
                alert('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø§Øª Ø§Ù„Ù…Ø¸Ù„Ù…Ø©');
                return;
            }
            
            const modal = document.getElementById('darkChatsModal');
            const chatsList = document.getElementById('darkChatsList');
            
            chatsList.innerHTML = '';
            
            darkChatRooms.forEach(room => {
                const roomCard = document.createElement('div');
                roomCard.className = 'room-card';
                
                const roomHeader = document.createElement('div');
                roomHeader.className = 'room-header-info';
                
                const roomInfo = document.createElement('div');
                roomInfo.innerHTML = `
                    <strong>Ø§Ù„ØºØ±ÙØ©: ${room.code}</strong>
                    <div style="font-size: 12px; color: #aaa;">
                        Ø§Ù„Ù…Ù†Ø´Ø¦: ${users.find(u => u.id === room.creator)?.username || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}
                        | Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡: ${room.members.length}
                        | ${room.active ? 'ğŸŸ¢ Ù†Ø´Ø·Ø©' : 'ğŸ”´ Ù…ØºÙ„Ù‚Ø©'}
                    </div>
                `;
                
                roomHeader.appendChild(roomInfo);
                roomCard.appendChild(roomHeader);
                
                if (room.messages.length > 0) {
                    const roomMessages = document.createElement('div');
                    roomMessages.className = 'room-messages';
                    
                    room.messages.slice(-5).forEach(msg => {
                        const messageDiv = document.createElement('div');
                        messageDiv.className = 'room-message';
                        messageDiv.textContent = `${users.find(u => u.id === msg.userId)?.username || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}: ${msg.text}`;
                        roomMessages.appendChild(messageDiv);
                    });
                    
                    roomCard.appendChild(roomMessages);
                }
                
                chatsList.appendChild(roomCard);
            });
            
            modal.style.display = 'block';
        }

        function closeDarkChatsModal() {
            document.getElementById('darkChatsModal').style.display = 'none';
        }

        function toggleSecretFeatures() {
            secretMode = !secretMode;
            if (secretMode) {
                document.getElementById('secretFeatures').style.display = 'block';
                document.getElementById('secretBtn').style.backgroundColor = 'var(--system)';
                document.getElementById('secretBtn').style.boxShadow = '0 0 15px var(--system)';
            } else {
                document.getElementById('secretFeatures').style.display = 'none';
                document.getElementById('secretBtn').style.backgroundColor = 'var(--accent)';
                document.getElementById('secretBtn').style.boxShadow = 'var(--shadow)';
            }
        }

        // ÙˆØ¸Ø§Ø¦Ù Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙˆØ«ÙŠÙ‚ ÙˆØ§Ù„Ù†Ù‚Ø§Ø·
        function submitProject() {
            const projectName = document.getElementById('projectName').value.trim();
            const projectDescription = document.getElementById('projectDescription').value.trim();
            const projectImages = document.getElementById('projectImages').files;
            
            if (!projectName || !projectDescription) {
                alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
                return;
            }
            
            // ÙÙŠ Ø¨ÙŠØ¦Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ©ØŒ Ø³Ù†Ù‚ÙˆÙ… Ø¨ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ± Ø¥Ù„Ù‰ base64
            // Ù‡Ù†Ø§ Ø³Ù†Ù‚ÙˆÙ… Ø¨Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
            const images = [];
            for (let i = 0; i < projectImages.length; i++) {
                images.push(`project_image_${i}`);
            }
            
            const project = {
                id: Date.now(),
                userId: currentUser.id,
                userName: currentUser.username,
                name: projectName,
                description: projectDescription,
                images: images,
                status: 'pending',
                verified: false,
                verifiedBy: null,
                verifiedAt: null,
                submittedAt: new Date().toISOString()
            };
            
            projects.push(project);
            saveProjects();
            loadUserProjects();
            
            // ØªØ³Ø¬ÙŠÙ„ ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
            addToArchive('submit_project', `ØªÙ‚Ø¯ÙŠÙ… Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯: ${projectName}`);
            
            // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„
            document.getElementById('projectName').value = '';
            document.getElementById('projectDescription').value = '';
            document.getElementById('projectImages').value = '';
            
            alert('ØªÙ… ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹ØªÙ‡ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©');
        }

        function loadUserProjects() {
            const userProjectsList = document.getElementById('userProjectsList');
            userProjectsList.innerHTML = '';
            
            const userProjects = projects.filter(p => p.userId === currentUser.id);
            
            if (userProjects.length === 0) {
                userProjectsList.innerHTML = '<p style="text-align: center; color: #666;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ø¶Ø§ÙØ©</p>';
                return;
            }
            
            userProjects.forEach(project => {
                const projectCard = document.createElement('div');
                projectCard.className = `project-card ${project.verified ? 'verified' : ''}`;
                
                if (project.verified) {
                    const verifiedBadge = document.createElement('div');
                    verifiedBadge.className = 'verified-badge';
                    verifiedBadge.textContent = 'Ù…ÙˆØ«Ù‚';
                    projectCard.appendChild(verifiedBadge);
                }
                
                const projectHeader = document.createElement('div');
                projectHeader.innerHTML = `
                    <h4>${project.name}</h4>
                    <div style="font-size: 12px; color: #aaa;">
                        ${new Date(project.submittedAt).toLocaleDateString()} | 
                        ${project.status === 'pending' ? 'â³ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©' : 
                          project.status === 'approved' ? 'âœ… Ù…Ø¹ØªÙ…Ø¯' : 'âŒ Ù…Ø±ÙÙˆØ¶'}
                    </div>
                `;
                
                const projectDesc = document.createElement('p');
                projectDesc.textContent = project.description;
                projectDesc.style.margin = '10px 0';
                
                projectCard.appendChild(projectHeader);
                projectCard.appendChild(projectDesc);
                
                if (project.images.length > 0) {
                    const projectImages = document.createElement('div');
                    projectImages.className = 'project-images';
                    
                    project.images.forEach(image => {
                        const img = document.createElement('img');
                        img.className = 'project-image';
                        img.src = 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%231a1a2e"/><text x="50" y="50" font-family="Arial" font-size="10" fill="%2300ff41" text-anchor="middle" dominant-baseline="middle">ØµÙˆØ±Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</text></svg>';
                        projectImages.appendChild(img);
                    });
                    
                    projectCard.appendChild(projectImages);
                }
                
                userProjectsList.appendChild(projectCard);
            });
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„Ù‚Ø© Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© (Ù„Ù„Ø³Ø³ØªÙ… ÙˆØ§Ù„Ù…Ø¯ÙŠØ±ÙŠÙ† ÙÙ‚Ø·)
            if (hasPermission('manage_users')) {
                loadPendingProjects();
            }
        }

        function loadPendingProjects() {
            const pendingProjectsList = document.getElementById('pendingProjectsList');
            pendingProjectsList.innerHTML = '';
            
            const pendingProjects = projects.filter(p => p.status === 'pending');
            
            if (pendingProjects.length === 0) {
                pendingProjectsList.innerHTML = '<p style="text-align: center; color: #666;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ø¹Ù„Ù‚Ø©</p>';
                return;
            }
            
            pendingProjects.forEach(project => {
                const projectCard = document.createElement('div');
                projectCard.className = 'project-card';
                
                const projectHeader = document.createElement('div');
                projectHeader.innerHTML = `
                    <h4>${project.name}</h4>
                    <div style="font-size: 12px; color: #aaa;">
                        Ù…Ù†: ${project.userName} | 
                        ${new Date(project.submittedAt).toLocaleDateString()}
                    </div>
                `;
                
                const projectDesc = document.createElement('p');
                projectDesc.textContent = project.description;
                projectDesc.style.margin = '10px 0';
                
                projectCard.appendChild(projectHeader);
                projectCard.appendChild(projectDesc);
                
                if (project.images.length > 0) {
                    const projectImages = document.createElement('div');
                    projectImages.className = 'project-images';
                    
                    project.images.forEach(image => {
                        const img = document.createElement('img');
                        img.className = 'project-image';
                        img.src = 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%231a1a2e"/><text x="50" y="50" font-family="Arial" font-size="10" fill="%2300ff41" text-anchor="middle" dominant-baseline="middle">ØµÙˆØ±Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</text></svg>';
                        projectImages.appendChild(img);
                    });
                    
                    projectCard.appendChild(projectImages);
                }
                
                const projectActions = document.createElement('div');
                projectActions.style.marginTop = '15px';
                projectActions.style.display = 'flex';
                projectActions.style.gap = '10px';
                
                const approveBtn = document.createElement('button');
                approveBtn.className = 'btn btn-success';
                approveBtn.textContent = 'Ù…ÙˆØ§ÙÙ‚Ø©';
                approveBtn.onclick = function() {
                    approveProject(project.id);
                };
                
                const rejectBtn = document.createElement('button');
                rejectBtn.className = 'btn btn-danger';
                rejectBtn.textContent = 'Ø±ÙØ¶';
                rejectBtn.onclick = function() {
                    rejectProject(project.id);
                };
                
                projectActions.appendChild(approveBtn);
                projectActions.appendChild(rejectBtn);
                
                projectCard.appendChild(projectActions);
                
                pendingProjectsList.appendChild(projectCard);
            });
        }

        function approveProject(projectId) {
            const project = projects.find(p => p.id === projectId);
            if (project) {
                project.status = 'approved';
                project.verified = true;
                project.verifiedBy = currentUser.id;
                project.verifiedAt = new Date().toISOString();
                
                // Ù…Ù†Ø­ Ù†Ù‚Ø§Ø· Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
                addUserPoints(project.userId, 15);
                
                saveProjects();
                loadUserProjects();
                loadPointsData();
                
                // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                addToArchive('approve_project', `Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ù…Ø´Ø±ÙˆØ¹ ${project.name} Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ${project.userName}`);
                
                alert('ØªÙ… ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­! ØªÙ… Ù…Ù†Ø­ 15 Ù†Ù‚Ø·Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…');
            }
        }

        function rejectProject(projectId) {
            const project = projects.find(p => p.id === projectId);
            if (project) {
                project.status = 'rejected';
                saveProjects();
                loadUserProjects();
                
                // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø±ÙØ¶ ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                addToArchive('reject_project', `Ø±ÙØ¶ Ù…Ø´Ø±ÙˆØ¹ ${project.name} Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ${project.userName}`);
                
                alert('ØªÙ… Ø±ÙØ¶ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹');
            }

            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…ÙˆØ«Ù‚Ø© Ù„Ø¹Ø±Ø¶Ù‡Ø§ Ù„Ù„Ø¬Ù…ÙŠØ¹
            function loadVerifiedProjects() {
                const verifiedList = document.getElementById('verifiedProjectsList');
                if (!verifiedList) return;
                verifiedList.innerHTML = '';

                const verified = projects.filter(p => p.verified === true);
                if (verified.length === 0) {
                    verifiedList.innerHTML = '<p style="color:#aaa">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…ÙˆØ«Ù‚Ø© Ø¨Ø¹Ø¯</p>';
                    return;
                }

                verified.slice().reverse().forEach(p => {
                    const card = document.createElement('div');
                    card.className = 'project-card';
                    card.style.cursor = 'pointer';
                    card.innerHTML = `<strong>${p.name}</strong> â€” ${p.userName} <div style="color:#aaa; font-size:12px">${new Date(p.submittedAt).toLocaleDateString()}</div>`;
                    card.onclick = function() {
                        const modal = document.getElementById('projectDetailsModal');
                        const title = document.getElementById('projectDetailsTitle');
                        const content = document.getElementById('projectDetailsContent');
                        title.textContent = `${p.name} â€” ${p.userName}`;
                        content.innerHTML = `<p>${p.description}</p>`;
                        modal.style.display = 'block';
                    };
                    verifiedList.appendChild(card);
                });
            }

            // Export / Import helpers so a user can move their data between devices
            function exportDataBackup() {
                const payload = {
                    users, messages, privateMessages, darkChatRooms, projects, userPoints, systemArchive, pendingPromotions, privateUnread
                };
                const blob = new Blob([JSON.stringify(payload, null, 2)], {type: 'application/json'});
                const a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                a.download = `shadow-root-backup-${new Date().toISOString().split('T')[0]}.json`;
                a.click();
            }

            function importDataBackup(file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const data = JSON.parse(e.target.result);
                        // Merge users and projects and other structures safely
                        if (Array.isArray(data.users)) {
                            data.users.forEach(u => {
                                if (!users.find(x => x.id === u.id)) users.push(u);
                            });
                        }
                        if (Array.isArray(data.projects)) {
                            data.projects.forEach(p => {
                                if (!projects.find(x => x.id === p.id)) projects.push(p);
                            });
                        }
                        if (data.userPoints) {
                            // Merge userPoints but keep existing entries (including zeros).
                            Object.keys(data.userPoints).forEach(k => {
                                if (!(k in userPoints)) userPoints[k] = data.userPoints[k];
                            });
                        }
                        if (Array.isArray(data.pendingPromotions)) {
                            data.pendingPromotions.forEach(pp => { if (!pendingPromotions.find(x=>x.id===pp.id)) pendingPromotions.push(pp); });
                        }
                        if (data.privateUnread) {
                            Object.keys(data.privateUnread).forEach(fromId => {
                                if (!privateUnread[fromId]) privateUnread[fromId] = {};
                                Object.keys(data.privateUnread[fromId]).forEach(toId => {
                                    if (!(toId in privateUnread[fromId])) privateUnread[fromId][toId] = data.privateUnread[fromId][toId];
                                });
                            });
                        }

                        saveUsers(); saveProjects(); saveUserPoints(); savePendingPromotions();
                        loadMembers(); loadUserProjects(); renderPendingPromotions(); loadVerifiedProjects();
                        alert('ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¯Ù…Ø¬Ù‡Ø§ Ø¨Ù†Ø¬Ø§Ø­');
                    } catch (err) {
                        alert('ÙØ´Ù„ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù: ØµÙŠØºØ© ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
                    }
                };
                reader.readAsText(file);
            }
        }

        function loadPointsData() {
            // ØªØ­Ø¯ÙŠØ« Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ
            document.getElementById('userPointsValue').textContent = userPoints[currentUser.id] || 0;
            document.getElementById('userPoints').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${userPoints[currentUser.id] || 0}`;
            
            // ØªØ­Ø¯ÙŠØ« Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            const points = userPoints[currentUser.id] || 0;
            let level = 'Ù…Ø¨ØªØ¯Ø¦';
            let badgeClass = 'badge-1';
            
            if (points >= 100) {
                level = 'Ø£Ø³Ø·ÙˆØ±ÙŠ';
                badgeClass = 'badge-6';
            } else if (points >= 50) {
                level = 'Ù…Ø­ØªØ±Ù';
                badgeClass = 'badge-5';
            } else if (points >= 30) {
                level = 'Ù…ØªÙ‚Ø¯Ù…';
                badgeClass = 'badge-4';
            } else if (points >= 15) {
                level = 'Ù…ØªÙˆØ³Ø·';
                badgeClass = 'badge-3';
            } else if (points >= 5) {
                level = 'Ù…Ø¨ØªØ¯Ø¦ Ù…ØªÙ‚Ø¯Ù…';
                badgeClass = 'badge-2';
            }
            
            document.getElementById('userLevel').textContent = `Ø§Ù„Ù…Ø³ØªÙˆÙ‰: ${level}`;
            
            // ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            const userBadges = document.getElementById('userBadges');
            userBadges.innerHTML = '';
            
            const badge = document.createElement('div');
            badge.className = `points-badge ${badgeClass}`;
            badge.textContent = level;
            userBadges.appendChild(badge);
            
            // ØªØ­Ø¯ÙŠØ« ØªØµÙ†ÙŠÙ Ø§Ù„Ù†Ù‚Ø§Ø·
            loadPointsLeaderboard();
        }

        function loadPointsLeaderboard() {
            const pointsLeaderboard = document.getElementById('pointsLeaderboard');
            pointsLeaderboard.innerHTML = '';
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ù…ØµÙÙˆÙØ© Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ø¹ Ù†Ù‚Ø§Ø·Ù‡Ù…
            const usersWithPoints = users
                .filter(user => !user.removed)
                .map(user => ({
                    id: user.id,
                    username: user.username,
                    points: userPoints[user.id] || 0,
                    rank: user.rank
                }))
                .sort((a, b) => b.points - a.points);
            
            if (usersWithPoints.length === 0) {
                pointsLeaderboard.innerHTML = '<p style="text-align: center; color: #666;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</p>';
                return;
            }
            
            usersWithPoints.forEach((user, index) => {
                const leaderboardItem = document.createElement('div');
                leaderboardItem.className = 'leaderboard-item';
                
                const userInfo = document.createElement('div');
                userInfo.innerHTML = `
                    <span class="leaderboard-rank">#${index + 1}</span>
                    ${user.username}
                    <span class="user-badge badge-${getBadgeLevel(user.points)}">${getRankName(user.rank)}</span>
                `;
                
                const userPointsEl = document.createElement('div');
                userPointsEl.textContent = user.points;
                userPointsEl.style.color = 'var(--hacker-green)';
                userPointsEl.style.fontWeight = 'bold';
                
                leaderboardItem.appendChild(userInfo);
                leaderboardItem.appendChild(userPointsEl);
                
                pointsLeaderboard.appendChild(leaderboardItem);
            });
        }

        function updatePointsUserSelect() {
            const pointsUserSelect = document.getElementById('pointsUserSelect');
            pointsUserSelect.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ù…Ø³ØªØ®Ø¯Ù… --</option>';
            
            users.forEach(user => {
                if (!user.removed && user.id !== currentUser.id) {
                    const option = document.createElement('option');
                    option.value = user.id;
                    option.textContent = `${user.username} (${getRankName(user.rank)}) - ${userPoints[user.id] || 0} Ù†Ù‚Ø·Ø©`;
                    pointsUserSelect.appendChild(option);
                }
            });
        }

        function addPoints() {
            const userId = document.getElementById('pointsUserSelect').value;
            const pointsAmount = Number(document.getElementById('pointsAmount').value);

            if (!userId || isNaN(pointsAmount) || pointsAmount <= 0) {
                alert('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø¹Ø¯Ø¯ Ù†Ù‚Ø§Ø· ØµØ­ÙŠØ­');
                return;
            }

            addUserPoints(userId, pointsAmount);
            document.getElementById('pointsAmount').value = '';
            
            // ØªØ³Ø¬ÙŠÙ„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ù‚Ø§Ø· ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
            addToArchive('add_points', `Ø¥Ø¶Ø§ÙØ© ${pointsAmount} Ù†Ù‚Ø·Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ${users.find(u => u.id === userId)?.username}`);
            
            alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ù‚Ø§Ø· Ø¨Ù†Ø¬Ø§Ø­');
        }

        function removePoints() {
            const userId = document.getElementById('pointsUserSelect').value;
            const pointsAmount = parseInt(document.getElementById('pointsAmount').value);
            
            if (!userId || isNaN(pointsAmount) || pointsAmount <= 0) {
                alert('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø¹Ø¯Ø¯ Ù†Ù‚Ø§Ø· ØµØ­ÙŠØ­');
                return;
            }
            
            const currentPoints = userPoints[userId] || 0;
            userPoints[userId] = Math.max(0, currentPoints - pointsAmount);
            saveUserPoints();
            loadPointsData();
            updatePointsUserSelect();
            
            document.getElementById('pointsAmount').value = '';
            
            // ØªØ³Ø¬ÙŠÙ„ Ø®ØµÙ… Ø§Ù„Ù†Ù‚Ø§Ø· ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
            addToArchive('remove_points', `Ø®ØµÙ… ${pointsAmount} Ù†Ù‚Ø·Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${users.find(u => u.id === userId)?.username}`);
            
            alert('ØªÙ… Ø®ØµÙ… Ø§Ù„Ù†Ù‚Ø§Ø· Ø¨Ù†Ø¬Ø§Ø­');
        }

        function resetPoints() {
            const userId = document.getElementById('pointsUserSelect').value;
            
            if (!userId) {
                alert('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø³ØªØ®Ø¯Ù…');
                return;
            }
            
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù†Ù‚Ø§Ø· Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ±ØŸ')) {
                userPoints[userId] = 0;
                saveUserPoints();
                loadPointsData();
                updatePointsUserSelect();
                
                // ØªØ³Ø¬ÙŠÙ„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                addToArchive('reset_points', `Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${users.find(u => u.id === userId)?.username}`);
                
                alert('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù‚Ø§Ø· Ø¨Ù†Ø¬Ø§Ø­');
            }
        }

        function addUserPoints(userId, points) {
            if (!userId) return;

            const prev = Number(userPoints[userId] || 0);
            const delta = Number(points || 0);
            userPoints[userId] = prev + delta;
            saveUserPoints();
            loadPointsData();
            updatePointsUserSelect();

            // Quick visual feedback
            try {
                const notice = document.createElement('div');
                notice.textContent = `ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${delta} Ù†Ù‚Ø§Ø· Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…`;
                notice.style.position = 'fixed';
                notice.style.bottom = '20px';
                notice.style.left = '20px';
                notice.style.background = 'rgba(0,0,0,0.8)';
                notice.style.color = 'var(--hacker-green)';
                notice.style.padding = '8px 12px';
                notice.style.borderRadius = '6px';
                document.body.appendChild(notice);
                setTimeout(() => notice.remove(), 1800);
            } catch (e) {
                /* ignore UI feedback errors */
            }
        }

        function awardDailyLoginPoints() {
            const today = new Date().toDateString();
            
            if (dailyLogin[currentUser.id] !== today) {
                // Ù…Ù†Ø­ Ù†Ù‚Ø§Ø· Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…ÙŠ
                addUserPoints(currentUser.id, 3);
                dailyLogin[currentUser.id] = today;
                saveDailyLogin();
                
                // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…ÙŠ ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ
                addToArchive('daily_login', `Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ${currentUser.username} - +3 Ù†Ù‚Ø§Ø·`);
            }
        }

        function getBadgeLevel(points) {
            if (points >= 100) return 6;
            if (points >= 50) return 5;
            if (points >= 30) return 4;
            if (points >= 15) return 3;
            if (points >= 5) return 2;
            return 1;
        }

        // ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©
        function showVerificationTab() {
            document.querySelector('.tab[data-tab="verification"]').click();
        }

        function showPointsTab() {
            document.querySelector('.tab[data-tab="points"]').click();
        }

        function showArchiveTab() {
            document.querySelector('.tab[data-tab="archive"]').click();
        }

        function showEarthFeatures() {
            if (currentUser.rank === 'system') {
                earthControl();
            } else {
                alert('Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© Ù…ØªØ§Ø­Ø© ÙÙ‚Ø· Ù„Ø±ØªØ¨Ø© SYSTEM');
            }
        }

        function showAdminTools() {
            const adminTabBtn = document.querySelector('.tab[data-tab="admin"]');
            if (adminTabBtn) adminTabBtn.click();
            // scroll to admin area
            setTimeout(() => {
                const adminArea = document.getElementById('adminTab');
                if (adminArea) adminArea.scrollIntoView({behavior: 'smooth', block: 'start'});
            }, 120);
        }

        function showSystemTools() {
            const adminTabBtn = document.querySelector('.tab[data-tab="admin"]');
            if (adminTabBtn) adminTabBtn.click();
            // scroll to system tools card specifically
            setTimeout(() => {
                const sysCard = document.getElementById('systemToolsCard');
                if (sysCard) {
                    sysCard.style.display = 'block';
                    sysCard.scrollIntoView({behavior: 'smooth', block: 'center'});
                }
            }, 150);
        }

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¥ÙƒÙ…Ø§Ù„
        function systemBroadcast() {
            sendSystemBroadcast();
        }

        // Register service worker for offline support (works when served over HTTP)
        if ('serviceWorker' in navigator) {
            try {
                navigator.serviceWorker.register('/sw.js').then(reg => {
                    console.log('Service worker registered', reg);
                }).catch(err => console.warn('SW register failed', err));
            } catch (e) {
                console.warn('SW not available', e);
            }
        }
    </script>
</body>
</html>


